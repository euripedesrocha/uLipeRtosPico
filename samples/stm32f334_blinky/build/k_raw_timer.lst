ARM GAS  /tmp/ccB9flSk.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"k_raw_timer.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.timer_step_tick,"ax",%progbits
  18              		.align	1
  19              		.syntax unified
  20              		.thumb
  21              		.thumb_func
  22              		.fpu fpv4-sp-d16
  24              	timer_step_tick:
  25              	.LFB20:
  26              		.file 1 "../../picokernel/k_raw_timer.c"
   1:../../picokernel/k_raw_timer.c **** /**
   2:../../picokernel/k_raw_timer.c ****  * 							ULIPE RTOS PICO
   3:../../picokernel/k_raw_timer.c ****  *  @file k_raw_timer.h
   4:../../picokernel/k_raw_timer.c ****  *
   5:../../picokernel/k_raw_timer.c ****  *  @brief timer primitive kernel header file
   6:../../picokernel/k_raw_timer.c ****  *
   7:../../picokernel/k_raw_timer.c ****  */
   8:../../picokernel/k_raw_timer.c **** 
   9:../../picokernel/k_raw_timer.c **** #include "ulipe_rtos_pico.h"
  10:../../picokernel/k_raw_timer.c **** 
  11:../../picokernel/k_raw_timer.c **** #if (K_ENABLE_TICKER > 0)
  12:../../picokernel/k_raw_timer.c **** 
  13:../../picokernel/k_raw_timer.c **** #define K_TIMER_NO_WAKEUP_TASK (archtype_t)0xFFFFFFFF
  14:../../picokernel/k_raw_timer.c **** 
  15:../../picokernel/k_raw_timer.c **** 
  16:../../picokernel/k_raw_timer.c **** 
  17:../../picokernel/k_raw_timer.c **** 
  18:../../picokernel/k_raw_timer.c **** #if(K_ENABLE_TIMERS > 0)
  19:../../picokernel/k_raw_timer.c **** /* static variables */
  20:../../picokernel/k_raw_timer.c **** static k_list_t k_timed_list;
  21:../../picokernel/k_raw_timer.c **** 
  22:../../picokernel/k_raw_timer.c **** #ifndef K_ENABLE_TIMER_GENERIC_SUPPORT
  23:../../picokernel/k_raw_timer.c **** static archtype_t k_elapsed_time = 0;
  24:../../picokernel/k_raw_timer.c **** static bool no_timers = true;
  25:../../picokernel/k_raw_timer.c **** #else
  26:../../picokernel/k_raw_timer.c **** ktimer_t *actual_timer;
  27:../../picokernel/k_raw_timer.c **** #endif
  28:../../picokernel/k_raw_timer.c **** 
  29:../../picokernel/k_raw_timer.c **** #endif
  30:../../picokernel/k_raw_timer.c **** 
  31:../../picokernel/k_raw_timer.c **** uint32_t tick_count = 0;
  32:../../picokernel/k_raw_timer.c **** tcb_t * next_task_wake = NULL;
ARM GAS  /tmp/ccB9flSk.s 			page 2


  33:../../picokernel/k_raw_timer.c **** static k_list_t k_ticker_list;
  34:../../picokernel/k_raw_timer.c **** 
  35:../../picokernel/k_raw_timer.c **** 
  36:../../picokernel/k_raw_timer.c **** THREAD_CONTROL_BLOCK_DECLARE(timer_tcb, K_TIMER_DISPATCHER_STACK_SIZE, K_TIMER_DISPATCHER_PRIORITY)
  37:../../picokernel/k_raw_timer.c **** 
  38:../../picokernel/k_raw_timer.c **** /** private functions */
  39:../../picokernel/k_raw_timer.c **** /**
  40:../../picokernel/k_raw_timer.c ****  *  @fn timer_period_sort()
  41:../../picokernel/k_raw_timer.c ****  *  @brief	sort all active timers on list to find which has the least time to wait
  42:../../picokernel/k_raw_timer.c ****  *  @param
  43:../../picokernel/k_raw_timer.c ****  *  @return
  44:../../picokernel/k_raw_timer.c ****  */
  45:../../picokernel/k_raw_timer.c **** static void timer_step_tick(void) 
  46:../../picokernel/k_raw_timer.c **** {
  27              		.loc 1 46 0
  28              		.cfi_startproc
  29              		@ args = 0, pretend = 0, frame = 0
  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31              		@ link register save eliminated.
  32              	.LVL0:
  47:../../picokernel/k_raw_timer.c **** 	tcb_t *ret = NULL;
  48:../../picokernel/k_raw_timer.c **** 
  49:../../picokernel/k_raw_timer.c **** 
  50:../../picokernel/k_raw_timer.c **** 	tick_count++;
  33              		.loc 1 50 0
  34 0000 384A     		ldr	r2, .L32
  35 0002 1368     		ldr	r3, [r2]
  36 0004 0133     		adds	r3, r3, #1
  37 0006 1360     		str	r3, [r2]
  38              	.LVL1:
  39              	.LBB105:
  40              	.LBB106:
  41              		.file 2 "../../../uLipeRtosPico/picokernel/inc/k_list.h"
   1:../../../uLipeRtosPico/picokernel/inc/k_list.h **** /**
   2:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * 							ULIPE RTOS PICO
   3:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
   4:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *  @file k_list.h
   5:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
   6:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *  @brief inline list implementantion core header file
   7:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
   8:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
   9:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  */
  10:../../../uLipeRtosPico/picokernel/inc/k_list.h **** #ifndef __K_LIST_H
  11:../../../uLipeRtosPico/picokernel/inc/k_list.h **** #define __K_LIST_H
  12:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 
  13:../../../uLipeRtosPico/picokernel/inc/k_list.h **** #include <stddef.h>
  14:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 
  15:../../../uLipeRtosPico/picokernel/inc/k_list.h **** /*
  16:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * Copyright (c) 2013-2015 Wind River Systems, Inc.
  17:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
  18:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * SPDX-License-Identifier: Apache-2.0
  19:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  */
  20:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 
  21:../../../uLipeRtosPico/picokernel/inc/k_list.h **** /**
  22:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @file
  23:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @brief Doubly-linked list inline implementation
  24:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
ARM GAS  /tmp/ccB9flSk.s 			page 3


  25:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * Doubly-linked list implementation.
  26:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
  27:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * The lists are expected to be initialized such that both the head and tail
  28:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * pointers point to the list itself.  Initializing the lists in such a fashion
  29:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * simplifies the adding and removing of nodes to/from the list.
  30:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  */
  31:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 
  32:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 
  33:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 
  34:../../../uLipeRtosPico/picokernel/inc/k_list.h **** /* classical container of to resolve list elements insert and remotion */
  35:../../../uLipeRtosPico/picokernel/inc/k_list.h **** #define CONTAINER_OF(ptr, type, field) ((type *)(((char *)(ptr)) - offsetof(type, field)))
  36:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 
  37:../../../uLipeRtosPico/picokernel/inc/k_list.h **** struct _dnode {
  38:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	union {
  39:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 		struct _dnode *head; /* ptr to head of list (sys_dlist_t) */
  40:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 		struct _dnode *next; /* ptr to next node    (sys_dnode_t) */
  41:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	};
  42:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	union {
  43:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 		struct _dnode *tail; /* ptr to tail of list (sys_dlist_t) */
  44:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 		struct _dnode *prev; /* ptr to previous node (sys_dnode_t) */
  45:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	};
  46:../../../uLipeRtosPico/picokernel/inc/k_list.h **** };
  47:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 
  48:../../../uLipeRtosPico/picokernel/inc/k_list.h **** typedef struct _dnode sys_dlist_t;
  49:../../../uLipeRtosPico/picokernel/inc/k_list.h **** typedef struct _dnode sys_dnode_t;
  50:../../../uLipeRtosPico/picokernel/inc/k_list.h **** typedef struct _dnode k_list_t;
  51:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 
  52:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 
  53:../../../uLipeRtosPico/picokernel/inc/k_list.h **** /**
  54:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @brief Provide the primitive to iterate on a list
  55:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * Note: the loop is unsafe and thus __dn should not be removed
  56:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
  57:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * User _MUST_ add the loop statement curly braces enclosing its own code:
  58:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
  59:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *     SYS_DLIST_FOR_EACH_NODE(l, n) {
  60:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *         <user code>
  61:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *     }
  62:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
  63:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @param __dl A pointer on a sys_dlist_t to iterate on
  64:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @param __dn A sys_dnode_t pointer to peek each node of the list
  65:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  */
  66:../../../uLipeRtosPico/picokernel/inc/k_list.h **** #define SYS_DLIST_FOR_EACH_NODE(__dl, __dn)				\
  67:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	for (__dn = sys_dlist_peek_head(__dl); __dn;			\
  68:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	     __dn = sys_dlist_peek_next(__dl, __dn))
  69:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 
  70:../../../uLipeRtosPico/picokernel/inc/k_list.h **** /**
  71:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @brief Provide the primitive to iterate on a list, from a node in the list
  72:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * Note: the loop is unsafe and thus __dn should not be removed
  73:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
  74:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * User _MUST_ add the loop statement curly braces enclosing its own code:
  75:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
  76:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *     SYS_DLIST_ITERATE_FROM_NODE(l, n) {
  77:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *         <user code>
  78:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *     }
  79:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
  80:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * Like SYS_DLIST_FOR_EACH_NODE(), but __dn already contains a node in the list
  81:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * where to start searching for the next entry from. If NULL, it starts from
ARM GAS  /tmp/ccB9flSk.s 			page 4


  82:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * the head.
  83:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
  84:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @param __dl A pointer on a sys_dlist_t to iterate on
  85:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @param __dn A sys_dnode_t pointer to peek each node of the list;
  86:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *             it contains the starting node, or NULL to start from the head
  87:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  */
  88:../../../uLipeRtosPico/picokernel/inc/k_list.h **** #define SYS_DLIST_ITERATE_FROM_NODE(__dl, __dn) \
  89:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	for (__dn = __dn ? sys_dlist_peek_next_no_check(__dl, __dn) \
  90:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 			 : sys_dlist_peek_head(__dl); \
  91:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	     __dn; \
  92:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	     __dn = sys_dlist_peek_next(__dl, __dn))
  93:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 
  94:../../../uLipeRtosPico/picokernel/inc/k_list.h **** /**
  95:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @brief Provide the primitive to safely iterate on a list
  96:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * Note: __dn can be removed, it will not break the loop.
  97:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
  98:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * User _MUST_ add the loop statement curly braces enclosing its own code:
  99:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
 100:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *     SYS_DLIST_FOR_EACH_NODE_SAFE(l, n, s) {
 101:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *         <user code>
 102:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *     }
 103:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
 104:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @param __dl A pointer on a sys_dlist_t to iterate on
 105:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @param __dn A sys_dnode_t pointer to peek each node of the list
 106:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @param __dns A sys_dnode_t pointer for the loop to run safely
 107:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  */
 108:../../../uLipeRtosPico/picokernel/inc/k_list.h **** #define SYS_DLIST_FOR_EACH_NODE_SAFE(__dl, __dn, __dns)			\
 109:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	for (__dn = sys_dlist_peek_head(__dl),				\
 110:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 		     __dns = sys_dlist_peek_next(__dl, __dn);  		\
 111:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	     __dn; __dn = __dns,					\
 112:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 		     __dns = sys_dlist_peek_next(__dl, __dn))
 113:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 
 114:../../../uLipeRtosPico/picokernel/inc/k_list.h **** /*
 115:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @brief Provide the primitive to resolve the container of a list node
 116:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * Note: it is safe to use with NULL pointer nodes
 117:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
 118:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @param __dn A pointer on a sys_dnode_t to get its container
 119:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @param __cn Container struct type pointer
 120:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @param __n The field name of sys_dnode_t within the container struct
 121:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  */
 122:../../../uLipeRtosPico/picokernel/inc/k_list.h **** #define SYS_DLIST_CONTAINER(__dn, __cn, __n) \
 123:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	(__dn ? CONTAINER_OF(__dn, __typeof__(*__cn), __n) : NULL)
 124:../../../uLipeRtosPico/picokernel/inc/k_list.h **** /*
 125:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @brief Provide the primitive to peek container of the list head
 126:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
 127:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @param __dl A pointer on a sys_dlist_t to peek
 128:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @param __cn Container struct type pointer
 129:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @param __n The field name of sys_dnode_t within the container struct
 130:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  */
 131:../../../uLipeRtosPico/picokernel/inc/k_list.h **** #define SYS_DLIST_PEEK_HEAD_CONTAINER(__dl, __cn, __n) \
 132:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	SYS_DLIST_CONTAINER(sys_dlist_peek_head(__dl), __cn, __n)
 133:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 
 134:../../../uLipeRtosPico/picokernel/inc/k_list.h **** /*
 135:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @brief Provide the primitive to peek the next container
 136:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
 137:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @param __dl A pointer on a sys_dlist_t to peek
 138:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @param __cn Container struct type pointer
ARM GAS  /tmp/ccB9flSk.s 			page 5


 139:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @param __n The field name of sys_dnode_t within the container struct
 140:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  */
 141:../../../uLipeRtosPico/picokernel/inc/k_list.h **** #define SYS_DLIST_PEEK_NEXT_CONTAINER(__dl, __cn, __n) \
 142:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	((__cn) ? SYS_DLIST_CONTAINER(sys_dlist_peek_next(__dl, &(__cn->__n)), \
 143:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 				      __cn, __n) : NULL)
 144:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 
 145:../../../uLipeRtosPico/picokernel/inc/k_list.h **** /**
 146:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @brief Provide the primitive to iterate on a list under a container
 147:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * Note: the loop is unsafe and thus __cn should not be detached
 148:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
 149:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * User _MUST_ add the loop statement curly braces enclosing its own code:
 150:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
 151:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *     SYS_DLIST_FOR_EACH_CONTAINER(l, c, n) {
 152:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *         <user code>
 153:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *     }
 154:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
 155:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @param __dl A pointer on a sys_dlist_t to iterate on
 156:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @param __cn A pointer to peek each entry of the list
 157:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @param __n The field name of sys_dnode_t within the container struct
 158:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  */
 159:../../../uLipeRtosPico/picokernel/inc/k_list.h **** #define SYS_DLIST_FOR_EACH_CONTAINER(__dl, __cn, __n)			\
 160:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	for (__cn = SYS_DLIST_PEEK_HEAD_CONTAINER(__dl, __cn, __n); __cn; \
 161:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	     __cn = SYS_DLIST_PEEK_NEXT_CONTAINER(__dl, __cn, __n))
 162:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 
 163:../../../uLipeRtosPico/picokernel/inc/k_list.h **** /**
 164:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @brief Provide the primitive to safely iterate on a list under a container
 165:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * Note: __cn can be detached, it will not break the loop.
 166:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
 167:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * User _MUST_ add the loop statement curly braces enclosing its own code:
 168:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
 169:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *     SYS_DLIST_FOR_EACH_CONTAINER_SAFE(l, c, cn, n) {
 170:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *         <user code>
 171:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *     }
 172:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
 173:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @param __dl A pointer on a sys_dlist_t to iterate on
 174:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @param __cn A pointer to peek each entry of the list
 175:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @param __cns A pointer for the loop to run safely
 176:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @param __n The field name of sys_dnode_t within the container struct
 177:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  */
 178:../../../uLipeRtosPico/picokernel/inc/k_list.h **** #define SYS_DLIST_FOR_EACH_CONTAINER_SAFE(__dl, __cn, __cns, __n)	\
 179:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	for (__cn = SYS_DLIST_PEEK_HEAD_CONTAINER(__dl, __cn, __n),	\
 180:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	     __cns = SYS_DLIST_PEEK_NEXT_CONTAINER(__dl, __cn, __n); __cn; \
 181:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	     __cn = __cns,						\
 182:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	     __cns = SYS_DLIST_PEEK_NEXT_CONTAINER(__dl, __cn, __n))
 183:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 
 184:../../../uLipeRtosPico/picokernel/inc/k_list.h **** /**
 185:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @brief initialize list
 186:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
 187:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @param list the doubly-linked list
 188:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
 189:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @return N/A
 190:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  */
 191:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 
 192:../../../uLipeRtosPico/picokernel/inc/k_list.h **** static inline void sys_dlist_init(sys_dlist_t *list)
 193:../../../uLipeRtosPico/picokernel/inc/k_list.h **** {
 194:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	list->head = (sys_dnode_t *)list;
 195:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	list->tail = (sys_dnode_t *)list;
ARM GAS  /tmp/ccB9flSk.s 			page 6


 196:../../../uLipeRtosPico/picokernel/inc/k_list.h **** }
 197:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 
 198:../../../uLipeRtosPico/picokernel/inc/k_list.h **** #define SYS_DLIST_STATIC_INIT(ptr_to_list) {{(ptr_to_list)}, {(ptr_to_list)}}
 199:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 
 200:../../../uLipeRtosPico/picokernel/inc/k_list.h **** /**
 201:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @brief check if a node is the list's head
 202:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
 203:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @param list the doubly-linked list to operate on
 204:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @param node the node to check
 205:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
 206:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @return 1 if node is the head, 0 otherwise
 207:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  */
 208:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 
 209:../../../uLipeRtosPico/picokernel/inc/k_list.h **** static inline int sys_dlist_is_head(sys_dlist_t *list, sys_dnode_t *node)
 210:../../../uLipeRtosPico/picokernel/inc/k_list.h **** {
 211:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	return list->head == node;
 212:../../../uLipeRtosPico/picokernel/inc/k_list.h **** }
 213:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 
 214:../../../uLipeRtosPico/picokernel/inc/k_list.h **** /**
 215:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @brief check if a node is the list's tail
 216:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
 217:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @param list the doubly-linked list to operate on
 218:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @param node the node to check
 219:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
 220:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @return 1 if node is the tail, 0 otherwise
 221:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  */
 222:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 
 223:../../../uLipeRtosPico/picokernel/inc/k_list.h **** static inline int sys_dlist_is_tail(sys_dlist_t *list, sys_dnode_t *node)
 224:../../../uLipeRtosPico/picokernel/inc/k_list.h **** {
 225:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	return list->tail == node;
 226:../../../uLipeRtosPico/picokernel/inc/k_list.h **** }
 227:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 
 228:../../../uLipeRtosPico/picokernel/inc/k_list.h **** /**
 229:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @brief check if the list is empty
 230:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
 231:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @param list the doubly-linked list to operate on
 232:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
 233:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @return 1 if empty, 0 otherwise
 234:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  */
 235:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 
 236:../../../uLipeRtosPico/picokernel/inc/k_list.h **** static inline int sys_dlist_is_empty(sys_dlist_t *list)
 237:../../../uLipeRtosPico/picokernel/inc/k_list.h **** {
 238:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	return list->head == list;
  42              		.loc 2 238 0
  43 0008 374A     		ldr	r2, .L32+4
  44 000a 1368     		ldr	r3, [r2]
  45              	.LVL2:
  46              	.LBE106:
  47              	.LBE105:
  51:../../picokernel/k_raw_timer.c **** 	/* no timer to run */
  52:../../picokernel/k_raw_timer.c **** 	if(!sys_dlist_is_empty(&k_ticker_list)) {
  48              		.loc 1 52 0
  49 000c 9342     		cmp	r3, r2
  50 000e 30D0     		beq	.L2
  53:../../picokernel/k_raw_timer.c **** 
  54:../../picokernel/k_raw_timer.c **** 		/* walk to list and check if task needs to be woken */
  55:../../picokernel/k_raw_timer.c **** 		SYS_DLIST_FOR_EACH_CONTAINER(&k_ticker_list, ret, thr_link) {
ARM GAS  /tmp/ccB9flSk.s 			page 7


  51              		.loc 1 55 0
  52 0010 0BB1     		cbz	r3, .L20
  53 0012 243B     		subs	r3, r3, #36
  54 0014 15E0     		b	.L4
  55              	.L20:
  56 0016 0023     		movs	r3, #0
  57 0018 13E0     		b	.L4
  58              	.LVL3:
  59              	.L30:
  56:../../picokernel/k_raw_timer.c **** 			if(next_task_wake == NULL) {
  57:../../picokernel/k_raw_timer.c **** 				next_task_wake = ret;
  60              		.loc 1 57 0
  61 001a 344A     		ldr	r2, .L32+8
  62 001c 1360     		str	r3, [r2]
  63 001e 15E0     		b	.L5
  64              	.L6:
  65              	.LVL4:
  66              	.LBB107:
  67              	.LBB108:
 239:../../../uLipeRtosPico/picokernel/inc/k_list.h **** }
 240:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 
 241:../../../uLipeRtosPico/picokernel/inc/k_list.h **** /**
 242:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @brief check if more than one node present
 243:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
 244:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @param list the doubly-linked list to operate on
 245:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
 246:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @return 1 if multiple nodes, 0 otherwise
 247:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  */
 248:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 
 249:../../../uLipeRtosPico/picokernel/inc/k_list.h **** static inline int sys_dlist_has_multiple_nodes(sys_dlist_t *list)
 250:../../../uLipeRtosPico/picokernel/inc/k_list.h **** {
 251:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	return list->head != list->tail;
 252:../../../uLipeRtosPico/picokernel/inc/k_list.h **** }
 253:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 
 254:../../../uLipeRtosPico/picokernel/inc/k_list.h **** /**
 255:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @brief get a reference to the head item in the list
 256:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
 257:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @param list the doubly-linked list to operate on
 258:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
 259:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @return a pointer to the head element, NULL if list is empty
 260:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  */
 261:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 
 262:../../../uLipeRtosPico/picokernel/inc/k_list.h **** static inline sys_dnode_t *sys_dlist_peek_head(sys_dlist_t *list)
 263:../../../uLipeRtosPico/picokernel/inc/k_list.h **** {
 264:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	return sys_dlist_is_empty(list) ? NULL : list->head;
 265:../../../uLipeRtosPico/picokernel/inc/k_list.h **** }
 266:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 
 267:../../../uLipeRtosPico/picokernel/inc/k_list.h **** /**
 268:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @brief get a reference to the head item in the list
 269:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
 270:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * The list must be known to be non-empty.
 271:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
 272:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @param list the doubly-linked list to operate on
 273:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
 274:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @return a pointer to the head element
 275:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  */
 276:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 
ARM GAS  /tmp/ccB9flSk.s 			page 8


 277:../../../uLipeRtosPico/picokernel/inc/k_list.h **** static inline sys_dnode_t *sys_dlist_peek_head_not_empty(sys_dlist_t *list)
 278:../../../uLipeRtosPico/picokernel/inc/k_list.h **** {
 279:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	return list->head;
 280:../../../uLipeRtosPico/picokernel/inc/k_list.h **** }
 281:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 
 282:../../../uLipeRtosPico/picokernel/inc/k_list.h **** /**
 283:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @brief get a reference to the next item in the list, node is not NULL
 284:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
 285:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * Faster than sys_dlist_peek_next() if node is known not to be NULL.
 286:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
 287:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @param list the doubly-linked list to operate on
 288:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @param node the node from which to get the next element in the list
 289:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
 290:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @return a pointer to the next element from a node, NULL if node is the tail
 291:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  */
 292:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 
 293:../../../uLipeRtosPico/picokernel/inc/k_list.h **** static inline sys_dnode_t *sys_dlist_peek_next_no_check(sys_dlist_t *list,
 294:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 							sys_dnode_t *node)
 295:../../../uLipeRtosPico/picokernel/inc/k_list.h **** {
 296:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	return (node == list->tail) ? NULL : node->next;
 297:../../../uLipeRtosPico/picokernel/inc/k_list.h **** }
 298:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 
 299:../../../uLipeRtosPico/picokernel/inc/k_list.h **** /**
 300:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @brief get a reference to the next item in the list
 301:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
 302:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @param list the doubly-linked list to operate on
 303:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @param node the node from which to get the next element in the list
 304:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
 305:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @return a pointer to the next element from a node, NULL if node is the tail
 306:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * or NULL (when node comes from reading the head of an empty list).
 307:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  */
 308:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 
 309:../../../uLipeRtosPico/picokernel/inc/k_list.h **** static inline sys_dnode_t *sys_dlist_peek_next(sys_dlist_t *list,
 310:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 					       sys_dnode_t *node)
 311:../../../uLipeRtosPico/picokernel/inc/k_list.h **** {
 312:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	return node ? sys_dlist_peek_next_no_check(list, node) : NULL;
  68              		.loc 2 312 0
  69 0020 13F12402 		adds	r2, r3, #36
  70              	.LVL5:
  71 0024 1DD0     		beq	.L21
  72              	.LVL6:
  73              	.LBB109:
  74              	.LBB110:
 296:../../../uLipeRtosPico/picokernel/inc/k_list.h **** }
  75              		.loc 2 296 0
  76 0026 3049     		ldr	r1, .L32+4
  77 0028 4968     		ldr	r1, [r1, #4]
  78 002a 9142     		cmp	r1, r2
  79 002c 1BD0     		beq	.L22
  80 002e 596A     		ldr	r1, [r3, #36]
  81              	.LVL7:
  82              	.L7:
  83              	.LBE110:
  84              	.LBE109:
  85              	.LBE108:
  86              	.LBE107:
  55:../../picokernel/k_raw_timer.c **** 			if(next_task_wake == NULL) {
ARM GAS  /tmp/ccB9flSk.s 			page 9


  87              		.loc 1 55 0
  88 0030 E9B1     		cbz	r1, .L23
  89              	.LVL8:
  90              	.LBB114:
  91              	.LBB115:
  92              		.loc 2 312 0 discriminator 8
  93 0032 22B1     		cbz	r2, .L9
  94              	.LVL9:
  95              	.LBB116:
  96              	.LBB117:
 296:../../../uLipeRtosPico/picokernel/inc/k_list.h **** }
  97              		.loc 2 296 0
  98 0034 2C49     		ldr	r1, .L32+4
  99 0036 4968     		ldr	r1, [r1, #4]
 100 0038 8A42     		cmp	r2, r1
 101 003a 16D0     		beq	.L24
 102 003c 5A6A     		ldr	r2, [r3, #36]
 103              	.LVL10:
 104              	.L9:
 105              	.LBE117:
 106              	.LBE116:
 107              	.LBE115:
 108              	.LBE114:
  55:../../picokernel/k_raw_timer.c **** 			if(next_task_wake == NULL) {
 109              		.loc 1 55 0
 110 003e A2F12403 		sub	r3, r2, #36
 111              	.LVL11:
 112              	.L4:
  55:../../picokernel/k_raw_timer.c **** 			if(next_task_wake == NULL) {
 113              		.loc 1 55 0 is_stmt 0 discriminator 14
 114 0042 B3B1     		cbz	r3, .L2
  56:../../picokernel/k_raw_timer.c **** 				next_task_wake = ret;
 115              		.loc 1 56 0 is_stmt 1
 116 0044 294A     		ldr	r2, .L32+8
 117 0046 1268     		ldr	r2, [r2]
 118 0048 002A     		cmp	r2, #0
 119 004a E6D0     		beq	.L30
 120              	.L5:
  58:../../picokernel/k_raw_timer.c **** 			}
  59:../../picokernel/k_raw_timer.c **** 
  60:../../picokernel/k_raw_timer.c **** 			if((next_task_wake->wake_tick > ret->wake_tick) && (ret->wake_tick != 0)) {
 121              		.loc 1 60 0
 122 004c 274A     		ldr	r2, .L32+8
 123 004e 1268     		ldr	r2, [r2]
 124 0050 5169     		ldr	r1, [r2, #20]
 125 0052 5A69     		ldr	r2, [r3, #20]
 126 0054 9142     		cmp	r1, r2
 127 0056 E3D9     		bls	.L6
 128              		.loc 1 60 0 is_stmt 0 discriminator 1
 129 0058 002A     		cmp	r2, #0
 130 005a E1D0     		beq	.L6
  61:../../picokernel/k_raw_timer.c **** 				next_task_wake = ret;
 131              		.loc 1 61 0 is_stmt 1
 132 005c 234A     		ldr	r2, .L32+8
 133 005e 1360     		str	r3, [r2]
 134 0060 DEE7     		b	.L6
 135              	.LVL12:
ARM GAS  /tmp/ccB9flSk.s 			page 10


 136              	.L21:
 137              	.LBB121:
 138              	.LBB113:
 139              		.loc 2 312 0
 140 0062 1146     		mov	r1, r2
 141 0064 E4E7     		b	.L7
 142              	.LVL13:
 143              	.L22:
 144              	.LBB112:
 145              	.LBB111:
 296:../../../uLipeRtosPico/picokernel/inc/k_list.h **** }
 146              		.loc 2 296 0
 147 0066 0021     		movs	r1, #0
 148 0068 E2E7     		b	.L7
 149              	.LVL14:
 150              	.L24:
 151              	.LBE111:
 152              	.LBE112:
 153              	.LBE113:
 154              	.LBE121:
 155              	.LBB122:
 156              	.LBB120:
 157              	.LBB119:
 158              	.LBB118:
 159 006a 0022     		movs	r2, #0
 160              	.LVL15:
 161 006c E7E7     		b	.L9
 162              	.LVL16:
 163              	.L23:
 164              	.LBE118:
 165              	.LBE119:
 166              	.LBE120:
 167              	.LBE122:
  55:../../picokernel/k_raw_timer.c **** 			if(next_task_wake == NULL) {
 168              		.loc 1 55 0
 169 006e 0023     		movs	r3, #0
 170              	.LVL17:
 171 0070 E7E7     		b	.L4
 172              	.LVL18:
 173              	.L2:
 174              	.LBB123:
 175              	.LBB124:
 238:../../../uLipeRtosPico/picokernel/inc/k_list.h **** }
 176              		.loc 2 238 0
 177 0072 1F4A     		ldr	r2, .L32+12
 178 0074 1368     		ldr	r3, [r2]
 179              	.LVL19:
 180              	.LBE124:
 181              	.LBE123:
  62:../../picokernel/k_raw_timer.c **** 			}
  63:../../picokernel/k_raw_timer.c **** 		}
  64:../../picokernel/k_raw_timer.c **** 	}
  65:../../picokernel/k_raw_timer.c **** 
  66:../../picokernel/k_raw_timer.c **** #if (K_ENABLE_TIMER_GENERIC_SUPPORT > 0)
  67:../../picokernel/k_raw_timer.c **** 	ktimer_t *tim = NULL;
  68:../../picokernel/k_raw_timer.c **** 
  69:../../picokernel/k_raw_timer.c **** 	if(!sys_dlist_is_empty(&k_timed_list)) {
ARM GAS  /tmp/ccB9flSk.s 			page 11


 182              		.loc 1 69 0
 183 0076 9342     		cmp	r3, r2
 184 0078 33D0     		beq	.L1
  70:../../picokernel/k_raw_timer.c **** 
  71:../../picokernel/k_raw_timer.c **** 		SYS_DLIST_FOR_EACH_CONTAINER(&k_timed_list, tim, timer_list_link) {
 185              		.loc 1 71 0
 186 007a 13B1     		cbz	r3, .L25
 187 007c A3F58C73 		sub	r3, r3, #280
 188 0080 17E0     		b	.L13
 189              	.L25:
 190 0082 0023     		movs	r3, #0
 191 0084 15E0     		b	.L13
 192              	.LVL20:
 193              	.L31:
  72:../../picokernel/k_raw_timer.c **** 			if(actual_timer == NULL) {
  73:../../picokernel/k_raw_timer.c **** 				actual_timer = tim;
 194              		.loc 1 73 0
 195 0086 1B4A     		ldr	r2, .L32+16
 196 0088 1360     		str	r3, [r2]
 197 008a 17E0     		b	.L14
 198              	.L15:
 199              	.LVL21:
 200              	.LBB125:
 201              	.LBB126:
 202              		.loc 2 312 0
 203 008c 13F58C72 		adds	r2, r3, #280
 204              	.LVL22:
 205 0090 1FD0     		beq	.L26
 206              	.LVL23:
 207              	.LBB127:
 208              	.LBB128:
 296:../../../uLipeRtosPico/picokernel/inc/k_list.h **** }
 209              		.loc 2 296 0
 210 0092 1749     		ldr	r1, .L32+12
 211 0094 4968     		ldr	r1, [r1, #4]
 212 0096 8A42     		cmp	r2, r1
 213 0098 1DD0     		beq	.L27
 214 009a D3F81811 		ldr	r1, [r3, #280]
 215              	.LVL24:
 216              	.L16:
 217              	.LBE128:
 218              	.LBE127:
 219              	.LBE126:
 220              	.LBE125:
  71:../../picokernel/k_raw_timer.c **** 			if(actual_timer == NULL) {
 221              		.loc 1 71 0
 222 009e F1B1     		cbz	r1, .L28
 223              	.LVL25:
 224              	.LBB132:
 225              	.LBB133:
 226              		.loc 2 312 0 discriminator 8
 227 00a0 2AB1     		cbz	r2, .L18
 228              	.LVL26:
 229              	.LBB134:
 230              	.LBB135:
 296:../../../uLipeRtosPico/picokernel/inc/k_list.h **** }
 231              		.loc 2 296 0
ARM GAS  /tmp/ccB9flSk.s 			page 12


 232 00a2 1349     		ldr	r1, .L32+12
 233 00a4 4968     		ldr	r1, [r1, #4]
 234 00a6 8A42     		cmp	r2, r1
 235 00a8 17D0     		beq	.L29
 236 00aa D3F81821 		ldr	r2, [r3, #280]
 237              	.LVL27:
 238              	.L18:
 239              	.LBE135:
 240              	.LBE134:
 241              	.LBE133:
 242              	.LBE132:
  71:../../picokernel/k_raw_timer.c **** 			if(actual_timer == NULL) {
 243              		.loc 1 71 0
 244 00ae A2F58C73 		sub	r3, r2, #280
 245              	.LVL28:
 246              	.L13:
  71:../../picokernel/k_raw_timer.c **** 			if(actual_timer == NULL) {
 247              		.loc 1 71 0 is_stmt 0 discriminator 14
 248 00b2 B3B1     		cbz	r3, .L1
  72:../../picokernel/k_raw_timer.c **** 			if(actual_timer == NULL) {
 249              		.loc 1 72 0 is_stmt 1
 250 00b4 0F4A     		ldr	r2, .L32+16
 251 00b6 1268     		ldr	r2, [r2]
 252 00b8 002A     		cmp	r2, #0
 253 00ba E4D0     		beq	.L31
 254              	.L14:
  74:../../picokernel/k_raw_timer.c **** 			}
  75:../../picokernel/k_raw_timer.c **** 
  76:../../picokernel/k_raw_timer.c **** 			if((actual_timer->load_val > tim->load_val) && (tim->load_val != 0)) {
 255              		.loc 1 76 0
 256 00bc 0D4A     		ldr	r2, .L32+16
 257 00be 1268     		ldr	r2, [r2]
 258 00c0 1168     		ldr	r1, [r2]
 259 00c2 1A68     		ldr	r2, [r3]
 260 00c4 9142     		cmp	r1, r2
 261 00c6 E1D9     		bls	.L15
 262              		.loc 1 76 0 is_stmt 0 discriminator 1
 263 00c8 002A     		cmp	r2, #0
 264 00ca DFD0     		beq	.L15
  77:../../picokernel/k_raw_timer.c **** 				actual_timer = tim;
 265              		.loc 1 77 0 is_stmt 1
 266 00cc 094A     		ldr	r2, .L32+16
 267 00ce 1360     		str	r3, [r2]
 268 00d0 DCE7     		b	.L15
 269              	.LVL29:
 270              	.L26:
 271              	.LBB139:
 272              	.LBB131:
 273              		.loc 2 312 0
 274 00d2 1146     		mov	r1, r2
 275 00d4 E3E7     		b	.L16
 276              	.LVL30:
 277              	.L27:
 278              	.LBB130:
 279              	.LBB129:
 296:../../../uLipeRtosPico/picokernel/inc/k_list.h **** }
 280              		.loc 2 296 0
ARM GAS  /tmp/ccB9flSk.s 			page 13


 281 00d6 0021     		movs	r1, #0
 282 00d8 E1E7     		b	.L16
 283              	.LVL31:
 284              	.L29:
 285              	.LBE129:
 286              	.LBE130:
 287              	.LBE131:
 288              	.LBE139:
 289              	.LBB140:
 290              	.LBB138:
 291              	.LBB137:
 292              	.LBB136:
 293 00da 0022     		movs	r2, #0
 294              	.LVL32:
 295 00dc E7E7     		b	.L18
 296              	.LVL33:
 297              	.L28:
 298              	.LBE136:
 299              	.LBE137:
 300              	.LBE138:
 301              	.LBE140:
  71:../../picokernel/k_raw_timer.c **** 			if(actual_timer == NULL) {
 302              		.loc 1 71 0
 303 00de 0023     		movs	r3, #0
 304              	.LVL34:
 305 00e0 E7E7     		b	.L13
 306              	.LVL35:
 307              	.L1:
 308 00e2 7047     		bx	lr
 309              	.L33:
 310              		.align	2
 311              	.L32:
 312 00e4 00000000 		.word	.LANCHOR0
 313 00e8 00000000 		.word	.LANCHOR1
 314 00ec 00000000 		.word	.LANCHOR2
 315 00f0 00000000 		.word	.LANCHOR3
 316 00f4 00000000 		.word	actual_timer
 317              		.cfi_endproc
 318              	.LFE20:
 320              		.section	.text.timer_dispatcher,"ax",%progbits
 321              		.align	1
 322              		.global	timer_dispatcher
 323              		.syntax unified
 324              		.thumb
 325              		.thumb_func
 326              		.fpu fpv4-sp-d16
 328              	timer_dispatcher:
 329              	.LFB21:
  78:../../picokernel/k_raw_timer.c **** 			}
  79:../../picokernel/k_raw_timer.c **** 		}
  80:../../picokernel/k_raw_timer.c **** 	}
  81:../../picokernel/k_raw_timer.c **** 
  82:../../picokernel/k_raw_timer.c **** #endif
  83:../../picokernel/k_raw_timer.c **** 
  84:../../picokernel/k_raw_timer.c **** 	return;
  85:../../picokernel/k_raw_timer.c **** }
  86:../../picokernel/k_raw_timer.c **** 
ARM GAS  /tmp/ccB9flSk.s 			page 14


  87:../../picokernel/k_raw_timer.c **** /**
  88:../../picokernel/k_raw_timer.c ****  *  @fn timer_period_sort()
  89:../../picokernel/k_raw_timer.c ****  *  @brief	sort all active timers on list to find which has the least time to wait
  90:../../picokernel/k_raw_timer.c ****  *  @param
  91:../../picokernel/k_raw_timer.c ****  *  @return
  92:../../picokernel/k_raw_timer.c ****  */
  93:../../picokernel/k_raw_timer.c **** 
  94:../../picokernel/k_raw_timer.c **** #if(K_ENABLE_TIMERS > 0)
  95:../../picokernel/k_raw_timer.c **** 
  96:../../picokernel/k_raw_timer.c **** #ifndef K_ENABLE_TIMER_GENERIC_SUPPORT
  97:../../picokernel/k_raw_timer.c **** static ktimer_t *timer_period_sort(k_list_t *tlist)
  98:../../picokernel/k_raw_timer.c **** {
  99:../../picokernel/k_raw_timer.c **** 	ktimer_t *ret = NULL;
 100:../../picokernel/k_raw_timer.c **** 	ktimer_t *tmp = NULL;
 101:../../picokernel/k_raw_timer.c **** 	k_list_t *head;
 102:../../picokernel/k_raw_timer.c **** 
 103:../../picokernel/k_raw_timer.c **** 	if(sys_dlist_is_empty(tlist))
 104:../../picokernel/k_raw_timer.c **** 		goto cleanup;
 105:../../picokernel/k_raw_timer.c **** 
 106:../../picokernel/k_raw_timer.c **** 	/*
 107:../../picokernel/k_raw_timer.c **** 	 * The objective here is to find the 
 108:../../picokernel/k_raw_timer.c **** 	 * timer which loads the less valued
 109:../../picokernel/k_raw_timer.c **** 	 * load to do it iterate list and compare each
 110:../../picokernel/k_raw_timer.c **** 	 * time against with reference, pick and keeps
 111:../../picokernel/k_raw_timer.c **** 	 * ret with this timer until interation ends
 112:../../picokernel/k_raw_timer.c **** 	 * or another load value fits in this rule
 113:../../picokernel/k_raw_timer.c **** 	 */
 114:../../picokernel/k_raw_timer.c **** 	head = sys_dlist_peek_head(tlist);
 115:../../picokernel/k_raw_timer.c **** 	ULIPE_ASSERT(head != NULL);	
 116:../../picokernel/k_raw_timer.c **** 	ret = CONTAINER_OF(head, ktimer_t, timer_list_link);
 117:../../picokernel/k_raw_timer.c **** 	ULIPE_ASSERT(ret != NULL);	
 118:../../picokernel/k_raw_timer.c **** 
 119:../../picokernel/k_raw_timer.c **** 	SYS_DLIST_FOR_EACH_CONTAINER(tlist, tmp, timer_list_link) {
 120:../../picokernel/k_raw_timer.c **** 		if(ret->load_val > tmp->load_val) {
 121:../../picokernel/k_raw_timer.c **** 			ret = tmp;
 122:../../picokernel/k_raw_timer.c **** 		}
 123:../../picokernel/k_raw_timer.c **** 	}
 124:../../picokernel/k_raw_timer.c **** 
 125:../../picokernel/k_raw_timer.c **** cleanup:
 126:../../picokernel/k_raw_timer.c **** 	return(ret);
 127:../../picokernel/k_raw_timer.c **** }
 128:../../picokernel/k_raw_timer.c **** 
 129:../../picokernel/k_raw_timer.c **** /**
 130:../../picokernel/k_raw_timer.c ****  *  @fn timer_rebuild_timeline()
 131:../../picokernel/k_raw_timer.c ****  *  @brief	rebuild the timer dispatch scheduling 
 132:../../picokernel/k_raw_timer.c ****  *  @param
 133:../../picokernel/k_raw_timer.c ****  *  @return
 134:../../picokernel/k_raw_timer.c ****  */
 135:../../picokernel/k_raw_timer.c **** static void timer_rebuild_timeline(ktimer_t *t, archtype_t *key)
 136:../../picokernel/k_raw_timer.c **** {
 137:../../picokernel/k_raw_timer.c **** 	ULIPE_ASSERT(t != NULL);
 138:../../picokernel/k_raw_timer.c **** 	ULIPE_ASSERT(key != NULL);
 139:../../picokernel/k_raw_timer.c **** 	archtype_t cmd;
 140:../../picokernel/k_raw_timer.c **** 
 141:../../picokernel/k_raw_timer.c **** 
 142:../../picokernel/k_raw_timer.c **** 	/* put the new timer on timeline list */
 143:../../picokernel/k_raw_timer.c **** 	sys_dlist_append(&k_timed_list, &t->timer_list_link);
ARM GAS  /tmp/ccB9flSk.s 			page 15


 144:../../picokernel/k_raw_timer.c **** 
 145:../../picokernel/k_raw_timer.c **** 
 146:../../picokernel/k_raw_timer.c **** 	/* check if timer is not running */
 147:../../picokernel/k_raw_timer.c **** 	if(no_timers) {
 148:../../picokernel/k_raw_timer.c **** 		cmd = K_TIMER_LOAD_FRESH;
 149:../../picokernel/k_raw_timer.c **** 
 150:../../picokernel/k_raw_timer.c **** 		t->load_val = t->timer_to_wait;
 151:../../picokernel/k_raw_timer.c **** 		t->running  = true;
 152:../../picokernel/k_raw_timer.c **** 		t->expired  = false;
 153:../../picokernel/k_raw_timer.c **** 
 154:../../picokernel/k_raw_timer.c **** 
 155:../../picokernel/k_raw_timer.c **** 		
 156:../../picokernel/k_raw_timer.c **** 	} else {
 157:../../picokernel/k_raw_timer.c **** 		cmd = K_TIMER_REFRESH;
 158:../../picokernel/k_raw_timer.c **** 		/* memorize the point of timeline when timer was added, we
 159:../../picokernel/k_raw_timer.c **** 		 * will use it to calculate the amount of counts
 160:../../picokernel/k_raw_timer.c **** 		 * to be loaded on timer IP when this timer 
 161:../../picokernel/k_raw_timer.c **** 		 * will be selected
 162:../../picokernel/k_raw_timer.c **** 		 */
 163:../../picokernel/k_raw_timer.c **** 			uint32_t tim = port_timer_halt();
 164:../../picokernel/k_raw_timer.c **** 
 165:../../picokernel/k_raw_timer.c **** 
 166:../../picokernel/k_raw_timer.c **** 			t->load_val = tim + t->timer_to_wait;
 167:../../picokernel/k_raw_timer.c **** 			t->running  = true;
 168:../../picokernel/k_raw_timer.c **** 			t->expired  = false;
 169:../../picokernel/k_raw_timer.c **** 
 170:../../picokernel/k_raw_timer.c **** 	}
 171:../../picokernel/k_raw_timer.c **** 	port_irq_unlock(*key);
 172:../../picokernel/k_raw_timer.c **** 	thread_set_signals(&timer_tcb,cmd);
 173:../../picokernel/k_raw_timer.c **** 	*key = port_irq_lock();
 174:../../picokernel/k_raw_timer.c **** 
 175:../../picokernel/k_raw_timer.c **** }
 176:../../picokernel/k_raw_timer.c **** #endif
 177:../../picokernel/k_raw_timer.c **** #endif
 178:../../picokernel/k_raw_timer.c **** 
 179:../../picokernel/k_raw_timer.c **** /**
 180:../../picokernel/k_raw_timer.c ****  *  @fn timer_dispatcher()
 181:../../picokernel/k_raw_timer.c ****  *  @brief	thread which dispatches services when expiration occur
 182:../../picokernel/k_raw_timer.c ****  *  @param
 183:../../picokernel/k_raw_timer.c ****  *  @return
 184:../../picokernel/k_raw_timer.c ****  */
 185:../../picokernel/k_raw_timer.c **** void timer_dispatcher(void *args)
 186:../../picokernel/k_raw_timer.c **** {
 330              		.loc 1 186 0
 331              		.cfi_startproc
 332              		@ args = 0, pretend = 0, frame = 8
 333              		@ frame_needed = 0, uses_anonymous_args = 0
 334              	.LVL36:
 335 0000 30B5     		push	{r4, r5, lr}
 336              	.LCFI0:
 337              		.cfi_def_cfa_offset 12
 338              		.cfi_offset 4, -12
 339              		.cfi_offset 5, -8
 340              		.cfi_offset 14, -4
 341 0002 83B0     		sub	sp, sp, #12
 342              	.LCFI1:
 343              		.cfi_def_cfa_offset 24
ARM GAS  /tmp/ccB9flSk.s 			page 16


 344              	.LVL37:
 187:../../picokernel/k_raw_timer.c **** 	(void)args;
 188:../../picokernel/k_raw_timer.c **** 	k_status_t err;
 189:../../picokernel/k_raw_timer.c **** 	archtype_t signals = 0, clear_msk =0;
 190:../../picokernel/k_raw_timer.c **** 
 191:../../picokernel/k_raw_timer.c **** 	archtype_t key = port_irq_lock();
 345              		.loc 1 191 0
 346 0004 FFF7FEFF 		bl	port_irq_lock
 347              	.LVL38:
 348              	.LBB141:
 349              	.LBB142:
 194:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	list->tail = (sys_dnode_t *)list;
 350              		.loc 2 194 0
 351 0008 764B     		ldr	r3, .L77
 352 000a 1B60     		str	r3, [r3]
 195:../../../uLipeRtosPico/picokernel/inc/k_list.h **** }
 353              		.loc 2 195 0
 354 000c 5B60     		str	r3, [r3, #4]
 355              	.LVL39:
 356              	.LBE142:
 357              	.LBE141:
 192:../../picokernel/k_raw_timer.c **** 
 193:../../picokernel/k_raw_timer.c **** #if(K_ENABLE_TIMERS > 0)
 194:../../picokernel/k_raw_timer.c **** 	sys_dlist_init(&k_timed_list);
 195:../../picokernel/k_raw_timer.c **** 	actual_timer = NULL;
 358              		.loc 1 195 0
 359 000e 0024     		movs	r4, #0
 360 0010 754B     		ldr	r3, .L77+4
 361 0012 1C60     		str	r4, [r3]
 362              	.LVL40:
 363              	.LBB143:
 364              	.LBB144:
 194:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	list->tail = (sys_dnode_t *)list;
 365              		.loc 2 194 0
 366 0014 754B     		ldr	r3, .L77+8
 367 0016 1B60     		str	r3, [r3]
 195:../../../uLipeRtosPico/picokernel/inc/k_list.h **** }
 368              		.loc 2 195 0
 369 0018 5B60     		str	r3, [r3, #4]
 370              	.LVL41:
 371              	.LBE144:
 372              	.LBE143:
 196:../../picokernel/k_raw_timer.c **** #endif
 197:../../picokernel/k_raw_timer.c **** 
 198:../../picokernel/k_raw_timer.c **** 	sys_dlist_init(&k_ticker_list);
 199:../../picokernel/k_raw_timer.c **** 	next_task_wake = NULL;
 373              		.loc 1 199 0
 374 001a 754B     		ldr	r3, .L77+12
 375 001c 1C60     		str	r4, [r3]
 200:../../picokernel/k_raw_timer.c **** 	port_irq_unlock(key);
 376              		.loc 1 200 0
 377 001e FFF7FEFF 		bl	port_irq_unlock
 378              	.LVL42:
 379 0022 ABE0     		b	.L62
 380              	.LVL43:
 381              	.L73:
 201:../../picokernel/k_raw_timer.c **** 
ARM GAS  /tmp/ccB9flSk.s 			page 17


 202:../../picokernel/k_raw_timer.c **** 
 203:../../picokernel/k_raw_timer.c **** 	for(;;){
 204:../../picokernel/k_raw_timer.c **** 		/* The dispatcher manages the incoming commands for kernel timer, 
 205:../../picokernel/k_raw_timer.c **** 		 * when the timer is not running and a fresh load was issued, 	
 206:../../picokernel/k_raw_timer.c **** 		 * the timer places the first point of timelinte. when timer expires
 207:../../picokernel/k_raw_timer.c **** 		 * the dispatcher is invoked and perform handling of current timer
 208:../../picokernel/k_raw_timer.c **** 		 * either dispatching or waking up a waiting thread (which called)
 209:../../picokernel/k_raw_timer.c **** 		 * a timer poll, and after sorts the timer list for the next wakeup
 210:../../picokernel/k_raw_timer.c **** 		 */
 211:../../picokernel/k_raw_timer.c **** 		if(!signals) {
 212:../../picokernel/k_raw_timer.c **** 			signals = thread_wait_signals(NULL, K_TIMER_LOAD_FRESH | K_TIMER_DISPATCH | K_TIMER_REFRESH | K_
 382              		.loc 1 212 0
 383 0024 0DF10703 		add	r3, sp, #7
 384 0028 0122     		movs	r2, #1
 385 002a 0F21     		movs	r1, #15
 386 002c 0020     		movs	r0, #0
 387 002e FFF7FEFF 		bl	thread_wait_signals
 388              	.LVL44:
 389 0032 0446     		mov	r4, r0
 390              	.LVL45:
 213:../../picokernel/k_raw_timer.c **** 					k_wait_match_any, &err);
 214:../../picokernel/k_raw_timer.c **** 			ULIPE_ASSERT(err != k_status_error);
 391              		.loc 1 214 0
 392 0034 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 393              	.LVL46:
 394              	.LBB145:
 395              	.LBB146:
 396              		.file 3 "../../../uLipeRtosPico/ulipe_rtos_pico.h"
   1:../../../uLipeRtosPico/ulipe_rtos_pico.h **** /**
   2:../../../uLipeRtosPico/ulipe_rtos_pico.h ****  * 							ULIPE RTOS PICO
   3:../../../uLipeRtosPico/ulipe_rtos_pico.h ****  *
   4:../../../uLipeRtosPico/ulipe_rtos_pico.h ****  *  @file ulipe_rtos_pico.h
   5:../../../uLipeRtosPico/ulipe_rtos_pico.h ****  *
   6:../../../uLipeRtosPico/ulipe_rtos_pico.h ****  *  @brief this file is treated as a master file
   7:../../../uLipeRtosPico/ulipe_rtos_pico.h ****  *
   8:../../../uLipeRtosPico/ulipe_rtos_pico.h ****  *
   9:../../../uLipeRtosPico/ulipe_rtos_pico.h ****  */
  10:../../../uLipeRtosPico/ulipe_rtos_pico.h **** #ifndef __ULIPE_RTOS_PICO_H
  11:../../../uLipeRtosPico/ulipe_rtos_pico.h **** #define __ULIPE_RTOS_PICO_H
  12:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 
  13:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 
  14:../../../uLipeRtosPico/ulipe_rtos_pico.h **** /* include all the kernel header files actig as a glue module */
  15:../../../uLipeRtosPico/ulipe_rtos_pico.h **** #include <stdint.h>
  16:../../../uLipeRtosPico/ulipe_rtos_pico.h **** #include <stdbool.h>
  17:../../../uLipeRtosPico/ulipe_rtos_pico.h **** #include <stddef.h>
  18:../../../uLipeRtosPico/ulipe_rtos_pico.h **** #include <string.h>
  19:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 
  20:../../../uLipeRtosPico/ulipe_rtos_pico.h **** #include "picokernel/inc/k_list.h"
  21:../../../uLipeRtosPico/ulipe_rtos_pico.h **** #include "ulipe_rtos_kconfig.h"
  22:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 
  23:../../../uLipeRtosPico/ulipe_rtos_pico.h **** #ifndef __ULIPE_RTOS_KCONFIG_H
  24:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 	#error "No config file found, loading default setings"
  25:../../../uLipeRtosPico/ulipe_rtos_pico.h **** #endif
  26:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 
  27:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 
  28:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 
  29:../../../uLipeRtosPico/ulipe_rtos_pico.h **** /* ulipe rtos pico status codes */
ARM GAS  /tmp/ccB9flSk.s 			page 18


  30:../../../uLipeRtosPico/ulipe_rtos_pico.h **** typedef enum {
  31:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 	/* general status */
  32:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 	k_status_ok = 0,
  33:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 	k_status_error,
  34:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 	k_status_invalid_param,
  35:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 	k_status_sched_locked,
  36:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 	k_status_illegal_from_isr,
  37:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 
  38:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 	/* threading status */
  39:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 	k_thread_rdy,
  40:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 	k_thread_del,
  41:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 	k_thread_blk,
  42:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 	k_thread_susp,
  43:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 
  44:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 	/* semaphore status */
  45:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 	k_sema_not_available,
  46:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 	k_sema_illegal_use_celling,
  47:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 	k_mutex_already_available,
  48:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 
  49:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 	/* queue status */
  50:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 	k_queue_empty,
  51:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 	k_queue_full,
  52:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 
  53:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 	/* wqueue status */
  54:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 	k_wqueue_already_exists,
  55:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 
  56:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 	/* timer status */
  57:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 	k_timer_expired,
  58:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 	k_timer_running,
  59:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 	k_timer_stopped,
  60:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 	k_timer_busy,
  61:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 
  62:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 
  63:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 	/* kernel configuration */
  64:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 	k_not_available_with_current_config,
  65:../../../uLipeRtosPico/ulipe_rtos_pico.h **** }k_status_t;
  66:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 
  67:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 
  68:../../../uLipeRtosPico/ulipe_rtos_pico.h **** /**
  69:../../../uLipeRtosPico/ulipe_rtos_pico.h ****  *  @fn template()
  70:../../../uLipeRtosPico/ulipe_rtos_pico.h ****  *  @brief
  71:../../../uLipeRtosPico/ulipe_rtos_pico.h ****  *  @param
  72:../../../uLipeRtosPico/ulipe_rtos_pico.h ****  *  @return
  73:../../../uLipeRtosPico/ulipe_rtos_pico.h ****  */
  74:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 
  75:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 
  76:../../../uLipeRtosPico/ulipe_rtos_pico.h **** /* resolves the arch dependend memory size */
  77:../../../uLipeRtosPico/ulipe_rtos_pico.h **** #if	(K_ARCH_MEM_WIDTH_BYTE > 0)
  78:../../../uLipeRtosPico/ulipe_rtos_pico.h **** typedef uint8_t archtype_t;
  79:../../../uLipeRtosPico/ulipe_rtos_pico.h **** #elif(K_ARCH_MEM_WIDTH_HALFWORD > 0)
  80:../../../uLipeRtosPico/ulipe_rtos_pico.h **** typedef uint16_t archtype_t;
  81:../../../uLipeRtosPico/ulipe_rtos_pico.h **** #elif (K_ARCH_MEM_WIDTH_WORD > 0)
  82:../../../uLipeRtosPico/ulipe_rtos_pico.h **** typedef uint32_t archtype_t;
  83:../../../uLipeRtosPico/ulipe_rtos_pico.h **** #elif (K_ARCH_MEM_WIDTH_DWORD > 0)
  84:../../../uLipeRtosPico/ulipe_rtos_pico.h **** typedef uint64_t archtype_t;
  85:../../../uLipeRtosPico/ulipe_rtos_pico.h **** #else
  86:../../../uLipeRtosPico/ulipe_rtos_pico.h **** #endif
ARM GAS  /tmp/ccB9flSk.s 			page 19


  87:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 
  88:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 
  89:../../../uLipeRtosPico/ulipe_rtos_pico.h **** #if(K_ENABLE_DYNAMIC_ALLOCATOR > 0)
  90:../../../uLipeRtosPico/ulipe_rtos_pico.h **** //#error "FATAL: Dynamic allocator is under development, please use memory pool instead!"
  91:../../../uLipeRtosPico/ulipe_rtos_pico.h **** #ifndef K_HEAP_SIZE
  92:../../../uLipeRtosPico/ulipe_rtos_pico.h **** #define K_HEAP_SIZE 1024
  93:../../../uLipeRtosPico/ulipe_rtos_pico.h **** #endif
  94:../../../uLipeRtosPico/ulipe_rtos_pico.h **** #endif
  95:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 
  96:../../../uLipeRtosPico/ulipe_rtos_pico.h **** #if(K_ENABLE_WORKQUEUES > 0)
  97:../../../uLipeRtosPico/ulipe_rtos_pico.h **** #ifndef K_WQUEUES_STACK_SIZE
  98:../../../uLipeRtosPico/ulipe_rtos_pico.h **** #define K_WQUEUES_STACK_SIZE 128
  99:../../../uLipeRtosPico/ulipe_rtos_pico.h **** #endif
 100:../../../uLipeRtosPico/ulipe_rtos_pico.h **** #endif
 101:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 
 102:../../../uLipeRtosPico/ulipe_rtos_pico.h **** #if(K_ENABLE_TICKLESS_IDLE > 0)
 103:../../../uLipeRtosPico/ulipe_rtos_pico.h **** #ifndef K_MAX_LOW_POWER_PERIOD
 104:../../../uLipeRtosPico/ulipe_rtos_pico.h **** #define K_MAX_LOW_POWER_PERIOD	100
 105:../../../uLipeRtosPico/ulipe_rtos_pico.h **** #endif
 106:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 
 107:../../../uLipeRtosPico/ulipe_rtos_pico.h **** #define K_HW_TIMER_COUNTS_PER_TICK (K_MACHINE_CLOCK / K_TICKER_RATE)
 108:../../../uLipeRtosPico/ulipe_rtos_pico.h **** extern void user_lowpower_entry(void *arg);
 109:../../../uLipeRtosPico/ulipe_rtos_pico.h **** extern void user_lowpower_exit(void *arg);
 110:../../../uLipeRtosPico/ulipe_rtos_pico.h **** #endif
 111:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 
 112:../../../uLipeRtosPico/ulipe_rtos_pico.h **** #include "include/picokernel/k_thread.h"
 113:../../../uLipeRtosPico/ulipe_rtos_pico.h **** #include "include/picokernel/k_port.h"
 114:../../../uLipeRtosPico/ulipe_rtos_pico.h **** #include "include/picokernel/k_kernel.h"
 115:../../../uLipeRtosPico/ulipe_rtos_pico.h **** #include "include/picokernel/k_message.h"
 116:../../../uLipeRtosPico/ulipe_rtos_pico.h **** #include "include/picokernel/k_raw_timer.h"
 117:../../../uLipeRtosPico/ulipe_rtos_pico.h **** #include "include/picokernel/k_sema.h"
 118:../../../uLipeRtosPico/ulipe_rtos_pico.h **** #include "include/picokernel/k_mutex.h"
 119:../../../uLipeRtosPico/ulipe_rtos_pico.h **** #include "include/picokernel/k_memp.h"
 120:../../../uLipeRtosPico/ulipe_rtos_pico.h **** #include "include/picokernel/k_mem_dyn.h"
 121:../../../uLipeRtosPico/ulipe_rtos_pico.h **** #include "include/picokernel/k_wqueue.h"
 122:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 
 123:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 
 124:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 
 125:../../../uLipeRtosPico/ulipe_rtos_pico.h **** /** assertion mechanism */
 126:../../../uLipeRtosPico/ulipe_rtos_pico.h **** static inline void ulipe_assert(bool x)
 127:../../../uLipeRtosPico/ulipe_rtos_pico.h **** {
 128:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 	if(!x){
 397              		.loc 3 128 0
 398 0038 012B     		cmp	r3, #1
 399 003a 40F0A280 		bne	.L35
 129:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 		port_set_break();
 400              		.loc 3 129 0
 401 003e FFF7FEFF 		bl	port_set_break
 402              	.LVL47:
 403              	.L36:
 404 0042 FEE7     		b	.L36
 405              	.LVL48:
 406              	.L74:
 407              	.LBE146:
 408              	.LBE145:
 409              	.LBB147:
 410              	.LBB148:
ARM GAS  /tmp/ccB9flSk.s 			page 20


 411              	.LBB149:
 412              	.LBB150:
 413 0044 FFF7FEFF 		bl	port_set_break
 414              	.LVL49:
 415              	.L40:
 416 0048 FEE7     		b	.L40
 417              	.LVL50:
 418              	.L75:
 419              	.LBE150:
 420              	.LBE149:
 421              	.LBB152:
 422              	.LBB153:
 264:../../../uLipeRtosPico/picokernel/inc/k_list.h **** }
 423              		.loc 2 264 0
 424 004a 0023     		movs	r3, #0
 425 004c C2E0     		b	.L41
 426              	.LVL51:
 427              	.L76:
 428              	.LBE153:
 429              	.LBE152:
 215:../../picokernel/k_raw_timer.c **** 
 216:../../picokernel/k_raw_timer.c **** 		}
 217:../../picokernel/k_raw_timer.c **** 
 218:../../picokernel/k_raw_timer.c **** 		if(signals & K_TIMER_TICK) {
 219:../../picokernel/k_raw_timer.c **** 			signals &= ~(K_TIMER_TICK);
 220:../../picokernel/k_raw_timer.c **** 			clear_msk |= K_TIMER_TICK;
 221:../../picokernel/k_raw_timer.c **** 
 222:../../picokernel/k_raw_timer.c **** 			/* check if exist some thread to wake */
 223:../../picokernel/k_raw_timer.c **** 			archtype_t key = port_irq_lock();
 224:../../picokernel/k_raw_timer.c **** 			timer_step_tick();
 225:../../picokernel/k_raw_timer.c **** 
 226:../../picokernel/k_raw_timer.c **** 
 227:../../picokernel/k_raw_timer.c **** 			/* check if time to wakeup */
 228:../../picokernel/k_raw_timer.c **** 			if((tick_count >= next_task_wake->wake_tick) && (next_task_wake != NULL)) {
 229:../../picokernel/k_raw_timer.c **** 				/* put this thread on ready list making it ready*/
 230:../../picokernel/k_raw_timer.c **** 				next_task_wake->thread_wait &= ~(K_THR_PEND_TICKER);
 231:../../picokernel/k_raw_timer.c **** 				sys_dlist_remove(&next_task_wake->thr_link);
 232:../../picokernel/k_raw_timer.c **** 				k_status_t err = k_make_ready(next_task_wake);
 233:../../picokernel/k_raw_timer.c **** 				ULIPE_ASSERT(err == k_status_ok);
 234:../../picokernel/k_raw_timer.c **** 
 235:../../picokernel/k_raw_timer.c **** 				/* get the next task */
 236:../../picokernel/k_raw_timer.c **** 				k_list_t *head = sys_dlist_peek_head(&k_ticker_list);
 237:../../picokernel/k_raw_timer.c **** 				if(!head) {
 238:../../picokernel/k_raw_timer.c **** 					next_task_wake = NULL;
 430              		.loc 1 238 0
 431 004e 0022     		movs	r2, #0
 432 0050 674B     		ldr	r3, .L77+12
 433 0052 1A60     		str	r2, [r3]
 434 0054 07E0     		b	.L43
 435              	.LVL52:
 436              	.L65:
 437              	.LBB157:
 438              	.LBB158:
 439              	.LBB159:
 440              		.loc 3 129 0
 441 0056 FFF7FEFF 		bl	port_set_break
 442              	.LVL53:
ARM GAS  /tmp/ccB9flSk.s 			page 21


 443              	.L46:
 444 005a FEE7     		b	.L46
 445              	.LVL54:
 446              	.L66:
 447              	.LBE159:
 448              	.LBE158:
 449              	.LBB161:
 450              	.LBB162:
 264:../../../uLipeRtosPico/picokernel/inc/k_list.h **** }
 451              		.loc 2 264 0
 452 005c 0023     		movs	r3, #0
 453 005e 1EE0     		b	.L47
 454              	.LVL55:
 455              	.L67:
 456              	.LBE162:
 457              	.LBE161:
 239:../../picokernel/k_raw_timer.c **** 				} else {
 240:../../picokernel/k_raw_timer.c **** 					next_task_wake = CONTAINER_OF(head, tcb_t, thr_link);
 241:../../picokernel/k_raw_timer.c **** 				}
 242:../../picokernel/k_raw_timer.c **** 
 243:../../picokernel/k_raw_timer.c **** 
 244:../../picokernel/k_raw_timer.c **** 				/* remove all expired tasks from delayed list */
 245:../../picokernel/k_raw_timer.c **** 				while((tick_count >= next_task_wake->wake_tick) && (next_task_wake != NULL)) {
 246:../../picokernel/k_raw_timer.c **** 					/* put this thread on ready list making it ready*/
 247:../../picokernel/k_raw_timer.c **** 					next_task_wake->thread_wait &= ~(K_THR_PEND_TICKER);
 248:../../picokernel/k_raw_timer.c **** 					sys_dlist_remove(&next_task_wake->thr_link);
 249:../../picokernel/k_raw_timer.c **** 					k_status_t err = k_make_ready(next_task_wake);
 250:../../picokernel/k_raw_timer.c **** 					ULIPE_ASSERT(err == k_status_ok);
 251:../../picokernel/k_raw_timer.c **** 
 252:../../picokernel/k_raw_timer.c **** 					/* get the next task */
 253:../../picokernel/k_raw_timer.c **** 					k_list_t *head = sys_dlist_peek_head(&k_ticker_list);
 254:../../picokernel/k_raw_timer.c **** 					if(!head) {
 255:../../picokernel/k_raw_timer.c **** 						next_task_wake = NULL;
 458              		.loc 1 255 0
 459 0060 0022     		movs	r2, #0
 460 0062 634B     		ldr	r3, .L77+12
 461 0064 1A60     		str	r2, [r3]
 462              	.LVL56:
 463              	.L43:
 464              	.LBE157:
 245:../../picokernel/k_raw_timer.c **** 					/* put this thread on ready list making it ready*/
 465              		.loc 1 245 0
 466 0066 624B     		ldr	r3, .L77+12
 467 0068 1B68     		ldr	r3, [r3]
 468 006a 5969     		ldr	r1, [r3, #20]
 469 006c 614A     		ldr	r2, .L77+16
 470 006e 1268     		ldr	r2, [r2]
 471 0070 9142     		cmp	r1, r2
 472 0072 1AD8     		bhi	.L38
 245:../../picokernel/k_raw_timer.c **** 					/* put this thread on ready list making it ready*/
 473              		.loc 1 245 0 is_stmt 0 discriminator 1
 474 0074 CBB1     		cbz	r3, .L38
 475              	.LBB170:
 247:../../picokernel/k_raw_timer.c **** 					sys_dlist_remove(&next_task_wake->thr_link);
 476              		.loc 1 247 0 is_stmt 1
 477 0076 9A89     		ldrh	r2, [r3, #12]
 478 0078 22F48072 		bic	r2, r2, #256
ARM GAS  /tmp/ccB9flSk.s 			page 22


 479 007c 9A81     		strh	r2, [r3, #12]	@ movhi
 480              	.LVL57:
 481              	.LBB166:
 482              	.LBB167:
 313:../../../uLipeRtosPico/picokernel/inc/k_list.h **** }
 314:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 
 315:../../../uLipeRtosPico/picokernel/inc/k_list.h **** /**
 316:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @brief get a reference to the tail item in the list
 317:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
 318:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @param list the doubly-linked list to operate on
 319:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
 320:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @return a pointer to the tail element, NULL if list is empty
 321:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  */
 322:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 
 323:../../../uLipeRtosPico/picokernel/inc/k_list.h **** static inline sys_dnode_t *sys_dlist_peek_tail(sys_dlist_t *list)
 324:../../../uLipeRtosPico/picokernel/inc/k_list.h **** {
 325:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	return sys_dlist_is_empty(list) ? NULL : list->tail;
 326:../../../uLipeRtosPico/picokernel/inc/k_list.h **** }
 327:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 
 328:../../../uLipeRtosPico/picokernel/inc/k_list.h **** /**
 329:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @brief add node to tail of list
 330:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
 331:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @param list the doubly-linked list to operate on
 332:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @param node the element to append
 333:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
 334:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @return N/A
 335:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  */
 336:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 
 337:../../../uLipeRtosPico/picokernel/inc/k_list.h **** static inline void sys_dlist_append(sys_dlist_t *list, sys_dnode_t *node)
 338:../../../uLipeRtosPico/picokernel/inc/k_list.h **** {
 339:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	node->next = list;
 340:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	node->prev = list->tail;
 341:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 
 342:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	list->tail->next = node;
 343:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	list->tail = node;
 344:../../../uLipeRtosPico/picokernel/inc/k_list.h **** }
 345:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 
 346:../../../uLipeRtosPico/picokernel/inc/k_list.h **** /**
 347:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @brief add node to head of list
 348:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
 349:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @param list the doubly-linked list to operate on
 350:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @param node the element to append
 351:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
 352:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @return N/A
 353:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  */
 354:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 
 355:../../../uLipeRtosPico/picokernel/inc/k_list.h **** static inline void sys_dlist_prepend(sys_dlist_t *list, sys_dnode_t *node)
 356:../../../uLipeRtosPico/picokernel/inc/k_list.h **** {
 357:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	node->next = list->head;
 358:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	node->prev = list;
 359:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 
 360:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	list->head->prev = node;
 361:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	list->head = node;
 362:../../../uLipeRtosPico/picokernel/inc/k_list.h **** }
 363:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 
 364:../../../uLipeRtosPico/picokernel/inc/k_list.h **** /**
 365:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @brief insert node after a node
ARM GAS  /tmp/ccB9flSk.s 			page 23


 366:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
 367:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * Insert a node after a specified node in a list.
 368:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
 369:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @param list the doubly-linked list to operate on
 370:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @param insert_point the insert point in the list: if NULL, insert at head
 371:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @param node the element to append
 372:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
 373:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @return N/A
 374:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  */
 375:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 
 376:../../../uLipeRtosPico/picokernel/inc/k_list.h **** static inline void sys_dlist_insert_after(sys_dlist_t *list,
 377:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	sys_dnode_t *insert_point, sys_dnode_t *node)
 378:../../../uLipeRtosPico/picokernel/inc/k_list.h **** {
 379:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	if (!insert_point) {
 380:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 		sys_dlist_prepend(list, node);
 381:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	} else {
 382:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 		node->next = insert_point->next;
 383:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 		node->prev = insert_point;
 384:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 		insert_point->next->prev = node;
 385:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 		insert_point->next = node;
 386:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	}
 387:../../../uLipeRtosPico/picokernel/inc/k_list.h **** }
 388:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 
 389:../../../uLipeRtosPico/picokernel/inc/k_list.h **** /**
 390:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @brief insert node before a node
 391:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
 392:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * Insert a node before a specified node in a list.
 393:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
 394:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @param list the doubly-linked list to operate on
 395:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @param insert_point the insert point in the list: if NULL, insert at tail
 396:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @param node the element to insert
 397:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
 398:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @return N/A
 399:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  */
 400:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 
 401:../../../uLipeRtosPico/picokernel/inc/k_list.h **** static inline void sys_dlist_insert_before(sys_dlist_t *list,
 402:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	sys_dnode_t *insert_point, sys_dnode_t *node)
 403:../../../uLipeRtosPico/picokernel/inc/k_list.h **** {
 404:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	if (!insert_point) {
 405:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 		sys_dlist_append(list, node);
 406:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	} else {
 407:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 		node->prev = insert_point->prev;
 408:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 		node->next = insert_point;
 409:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 		insert_point->prev->next = node;
 410:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 		insert_point->prev = node;
 411:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	}
 412:../../../uLipeRtosPico/picokernel/inc/k_list.h **** }
 413:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 
 414:../../../uLipeRtosPico/picokernel/inc/k_list.h **** /**
 415:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @brief insert node at position
 416:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
 417:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * Insert a node in a location depending on a external condition. The cond()
 418:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * function checks if the node is to be inserted _before_ the current node
 419:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * against which it is checked.
 420:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
 421:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @param list the doubly-linked list to operate on
 422:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @param node the element to insert
ARM GAS  /tmp/ccB9flSk.s 			page 24


 423:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @param cond a function that determines if the current node is the correct
 424:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *             insert point
 425:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @param data parameter to cond()
 426:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
 427:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @return N/A
 428:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  */
 429:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 
 430:../../../uLipeRtosPico/picokernel/inc/k_list.h **** static inline void sys_dlist_insert_at(sys_dlist_t *list, sys_dnode_t *node,
 431:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	int (*cond)(sys_dnode_t *, void *), void *data)
 432:../../../uLipeRtosPico/picokernel/inc/k_list.h **** {
 433:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	if (sys_dlist_is_empty(list)) {
 434:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 		sys_dlist_append(list, node);
 435:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	} else {
 436:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 		sys_dnode_t *pos = sys_dlist_peek_head(list);
 437:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 
 438:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 		while (pos && !cond(pos, data)) {
 439:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 			pos = sys_dlist_peek_next(list, pos);
 440:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 		}
 441:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 		sys_dlist_insert_before(list, pos, node);
 442:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	}
 443:../../../uLipeRtosPico/picokernel/inc/k_list.h **** }
 444:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 
 445:../../../uLipeRtosPico/picokernel/inc/k_list.h **** /**
 446:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @brief remove a specific node from a list
 447:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
 448:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * The list is implicit from the node. The node must be part of a list.
 449:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
 450:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @param node the node to remove
 451:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  *
 452:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  * @return N/A
 453:../../../uLipeRtosPico/picokernel/inc/k_list.h ****  */
 454:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 
 455:../../../uLipeRtosPico/picokernel/inc/k_list.h **** static inline void sys_dlist_remove(sys_dnode_t *node)
 456:../../../uLipeRtosPico/picokernel/inc/k_list.h **** {
 457:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	node->prev->next = node->next;
 483              		.loc 2 457 0
 484 007e 9A6A     		ldr	r2, [r3, #40]
 485 0080 596A     		ldr	r1, [r3, #36]
 486 0082 1160     		str	r1, [r2]
 458:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	node->next->prev = node->prev;
 487              		.loc 2 458 0
 488 0084 5A6A     		ldr	r2, [r3, #36]
 489 0086 9B6A     		ldr	r3, [r3, #40]
 490              	.LVL58:
 491 0088 5360     		str	r3, [r2, #4]
 492              	.LBE167:
 493              	.LBE166:
 249:../../picokernel/k_raw_timer.c **** 					ULIPE_ASSERT(err == k_status_ok);
 494              		.loc 1 249 0
 495 008a 594B     		ldr	r3, .L77+12
 496 008c 1868     		ldr	r0, [r3]
 497 008e FFF7FEFF 		bl	k_make_ready
 498              	.LVL59:
 499              	.LBB168:
 500              	.LBB160:
 128:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 		port_set_break();
 501              		.loc 3 128 0
ARM GAS  /tmp/ccB9flSk.s 			page 25


 502 0092 0028     		cmp	r0, #0
 503 0094 DFD1     		bne	.L65
 504              	.LVL60:
 505              	.LBE160:
 506              	.LBE168:
 507              	.LBB169:
 508              	.LBB165:
 509              	.LBB163:
 510              	.LBB164:
 238:../../../uLipeRtosPico/picokernel/inc/k_list.h **** }
 511              		.loc 2 238 0
 512 0096 554A     		ldr	r2, .L77+8
 513 0098 1368     		ldr	r3, [r2]
 514              	.LVL61:
 515              	.LBE164:
 516              	.LBE163:
 264:../../../uLipeRtosPico/picokernel/inc/k_list.h **** }
 517              		.loc 2 264 0
 518 009a 9342     		cmp	r3, r2
 519 009c DED0     		beq	.L66
 520              	.L47:
 521              	.LVL62:
 522              	.LBE165:
 523              	.LBE169:
 254:../../picokernel/k_raw_timer.c **** 						next_task_wake = NULL;
 524              		.loc 1 254 0
 525 009e 002B     		cmp	r3, #0
 526 00a0 DED0     		beq	.L67
 256:../../picokernel/k_raw_timer.c **** 					} else {
 257:../../picokernel/k_raw_timer.c **** 						next_task_wake = CONTAINER_OF(head, tcb_t, thr_link);
 527              		.loc 1 257 0
 528 00a2 243B     		subs	r3, r3, #36
 529 00a4 524A     		ldr	r2, .L77+12
 530 00a6 1360     		str	r3, [r2]
 531 00a8 DDE7     		b	.L43
 532              	.LVL63:
 533              	.L38:
 534              	.LBE170:
 535              	.LBE148:
 258:../../picokernel/k_raw_timer.c **** 					}
 259:../../picokernel/k_raw_timer.c **** 				}
 260:../../picokernel/k_raw_timer.c **** 			}
 261:../../picokernel/k_raw_timer.c **** 
 262:../../picokernel/k_raw_timer.c **** #if(K_ENABLE_TIMER_GENERIC_SUPPORT > 0)
 263:../../picokernel/k_raw_timer.c **** 
 264:../../picokernel/k_raw_timer.c **** 			if((tick_count >= actual_timer->load_val) && (actual_timer != NULL)) {
 536              		.loc 1 264 0
 537 00aa 4F4B     		ldr	r3, .L77+4
 538 00ac 1B68     		ldr	r3, [r3]
 539 00ae 1968     		ldr	r1, [r3]
 540 00b0 504A     		ldr	r2, .L77+16
 541 00b2 1268     		ldr	r2, [r2]
 542 00b4 9142     		cmp	r1, r2
 543 00b6 58D8     		bhi	.L51
 544              		.loc 1 264 0 is_stmt 0 discriminator 1
 545 00b8 002B     		cmp	r3, #0
 546 00ba 56D0     		beq	.L51
ARM GAS  /tmp/ccB9flSk.s 			page 26


 547              	.LVL64:
 548              	.LBB175:
 549              	.LBB176:
 550              	.LBB177:
 457:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	node->next->prev = node->prev;
 551              		.loc 2 457 0 is_stmt 1
 552 00bc D3F81C21 		ldr	r2, [r3, #284]
 553 00c0 D3F81811 		ldr	r1, [r3, #280]
 554 00c4 1160     		str	r1, [r2]
 555              		.loc 2 458 0
 556 00c6 D3F81821 		ldr	r2, [r3, #280]
 557 00ca D3F81C31 		ldr	r3, [r3, #284]
 558              	.LVL65:
 559 00ce 5360     		str	r3, [r2, #4]
 560              	.LBE177:
 561              	.LBE176:
 265:../../picokernel/k_raw_timer.c **** 				/* put this thread on ready list making it ready*/
 266:../../picokernel/k_raw_timer.c **** 				sys_dlist_remove(&actual_timer->timer_list_link);
 267:../../picokernel/k_raw_timer.c **** 
 268:../../picokernel/k_raw_timer.c **** 				if(actual_timer->cb != NULL)
 562              		.loc 1 268 0
 563 00d0 454B     		ldr	r3, .L77+4
 564 00d2 1B68     		ldr	r3, [r3]
 565 00d4 9A68     		ldr	r2, [r3, #8]
 566 00d6 12B1     		cbz	r2, .L52
 269:../../picokernel/k_raw_timer.c **** 					actual_timer->cb(actual_timer->user_data, actual_timer);
 567              		.loc 1 269 0
 568 00d8 1946     		mov	r1, r3
 569 00da D868     		ldr	r0, [r3, #12]
 570 00dc 9047     		blx	r2
 571              	.LVL66:
 572              	.L52:
 270:../../picokernel/k_raw_timer.c **** 
 271:../../picokernel/k_raw_timer.c **** 				actual_timer->running = false;
 573              		.loc 1 271 0
 574 00de 424B     		ldr	r3, .L77+4
 575 00e0 1B68     		ldr	r3, [r3]
 576 00e2 0022     		movs	r2, #0
 577 00e4 9A74     		strb	r2, [r3, #18]
 272:../../picokernel/k_raw_timer.c **** 				actual_timer->expired = true;
 578              		.loc 1 272 0
 579 00e6 0122     		movs	r2, #1
 580 00e8 1A74     		strb	r2, [r3, #16]
 581              	.LVL67:
 582              	.LBB178:
 583              	.LBB179:
 584              	.LBB180:
 585              	.LBB181:
 238:../../../uLipeRtosPico/picokernel/inc/k_list.h **** }
 586              		.loc 2 238 0
 587 00ea 3E4A     		ldr	r2, .L77
 588 00ec 1368     		ldr	r3, [r2]
 589              	.LVL68:
 590              	.LBE181:
 591              	.LBE180:
 264:../../../uLipeRtosPico/picokernel/inc/k_list.h **** }
 592              		.loc 2 264 0
ARM GAS  /tmp/ccB9flSk.s 			page 27


 593 00ee 9342     		cmp	r3, r2
 594 00f0 05D0     		beq	.L68
 595              	.L53:
 596              	.LVL69:
 597              	.LBE179:
 598              	.LBE178:
 273:../../picokernel/k_raw_timer.c **** 
 274:../../picokernel/k_raw_timer.c **** 				/* get the next task */
 275:../../picokernel/k_raw_timer.c **** 				k_list_t *head = sys_dlist_peek_head(&k_timed_list);
 276:../../picokernel/k_raw_timer.c **** 				if(!head) {
 599              		.loc 1 276 0
 600 00f2 33B1     		cbz	r3, .L69
 277:../../picokernel/k_raw_timer.c **** 					actual_timer = NULL;
 278:../../picokernel/k_raw_timer.c **** 				} else {
 279:../../picokernel/k_raw_timer.c **** 					actual_timer = CONTAINER_OF(head, ktimer_t, timer_list_link);
 601              		.loc 1 279 0
 602 00f4 A3F58C73 		sub	r3, r3, #280
 603 00f8 3B4A     		ldr	r2, .L77+4
 604 00fa 1360     		str	r3, [r2]
 605 00fc 17E0     		b	.L55
 606              	.LVL70:
 607              	.L68:
 608              	.LBB183:
 609              	.LBB182:
 264:../../../uLipeRtosPico/picokernel/inc/k_list.h **** }
 610              		.loc 2 264 0
 611 00fe 0023     		movs	r3, #0
 612 0100 F7E7     		b	.L53
 613              	.LVL71:
 614              	.L69:
 615              	.LBE182:
 616              	.LBE183:
 277:../../picokernel/k_raw_timer.c **** 					actual_timer = NULL;
 617              		.loc 1 277 0
 618 0102 0022     		movs	r2, #0
 619 0104 384B     		ldr	r3, .L77+4
 620 0106 1A60     		str	r2, [r3]
 621 0108 11E0     		b	.L55
 622              	.L72:
 623              	.LBB184:
 280:../../picokernel/k_raw_timer.c **** 				}
 281:../../picokernel/k_raw_timer.c **** 
 282:../../picokernel/k_raw_timer.c **** 
 283:../../picokernel/k_raw_timer.c **** 
 284:../../picokernel/k_raw_timer.c **** 				while((tick_count >= actual_timer->load_val) && (actual_timer != NULL)) {
 285:../../picokernel/k_raw_timer.c **** 					/* put this thread on ready list making it ready*/
 286:../../picokernel/k_raw_timer.c **** 					sys_dlist_remove(&actual_timer->timer_list_link);
 287:../../picokernel/k_raw_timer.c **** 
 288:../../picokernel/k_raw_timer.c **** 					if(actual_timer->cb != NULL)
 289:../../picokernel/k_raw_timer.c **** 						actual_timer->cb(actual_timer->user_data, actual_timer);
 624              		.loc 1 289 0
 625 010a 1946     		mov	r1, r3
 626 010c D868     		ldr	r0, [r3, #12]
 627 010e 9047     		blx	r2
 628              	.LVL72:
 629              	.L57:
 290:../../picokernel/k_raw_timer.c **** 
ARM GAS  /tmp/ccB9flSk.s 			page 28


 291:../../picokernel/k_raw_timer.c **** 					actual_timer->running = false;
 630              		.loc 1 291 0
 631 0110 354B     		ldr	r3, .L77+4
 632 0112 1B68     		ldr	r3, [r3]
 633 0114 0022     		movs	r2, #0
 634 0116 9A74     		strb	r2, [r3, #18]
 292:../../picokernel/k_raw_timer.c **** 					actual_timer->expired = true;
 635              		.loc 1 292 0
 636 0118 0122     		movs	r2, #1
 637 011a 1A74     		strb	r2, [r3, #16]
 638              	.LVL73:
 639              	.LBB185:
 640              	.LBB186:
 641              	.LBB187:
 642              	.LBB188:
 238:../../../uLipeRtosPico/picokernel/inc/k_list.h **** }
 643              		.loc 2 238 0
 644 011c 314A     		ldr	r2, .L77
 645 011e 1368     		ldr	r3, [r2]
 646              	.LVL74:
 647              	.LBE188:
 648              	.LBE187:
 264:../../../uLipeRtosPico/picokernel/inc/k_list.h **** }
 649              		.loc 2 264 0
 650 0120 9342     		cmp	r3, r2
 651 0122 1CD0     		beq	.L70
 652              	.L58:
 653              	.LVL75:
 654              	.LBE186:
 655              	.LBE185:
 293:../../picokernel/k_raw_timer.c **** 
 294:../../picokernel/k_raw_timer.c **** 					/* get the next task */
 295:../../picokernel/k_raw_timer.c **** 					k_list_t *head = sys_dlist_peek_head(&k_timed_list);
 296:../../picokernel/k_raw_timer.c **** 					if(!head) {
 656              		.loc 1 296 0
 657 0124 EBB1     		cbz	r3, .L71
 297:../../picokernel/k_raw_timer.c **** 						actual_timer = NULL;
 298:../../picokernel/k_raw_timer.c **** 					} else {
 299:../../picokernel/k_raw_timer.c **** 						actual_timer = CONTAINER_OF(head, ktimer_t, timer_list_link);
 658              		.loc 1 299 0
 659 0126 A3F58C73 		sub	r3, r3, #280
 660 012a 2F4A     		ldr	r2, .L77+4
 661 012c 1360     		str	r3, [r2]
 662              	.L55:
 663              	.LBE184:
 284:../../picokernel/k_raw_timer.c **** 					/* put this thread on ready list making it ready*/
 664              		.loc 1 284 0
 665 012e 2E4B     		ldr	r3, .L77+4
 666 0130 1B68     		ldr	r3, [r3]
 667 0132 1968     		ldr	r1, [r3]
 668 0134 2F4A     		ldr	r2, .L77+16
 669 0136 1268     		ldr	r2, [r2]
 670 0138 9142     		cmp	r1, r2
 671 013a 16D8     		bhi	.L51
 284:../../picokernel/k_raw_timer.c **** 					/* put this thread on ready list making it ready*/
 672              		.loc 1 284 0 is_stmt 0 discriminator 1
 673 013c ABB1     		cbz	r3, .L51
ARM GAS  /tmp/ccB9flSk.s 			page 29


 674              	.LVL76:
 675              	.LBB193:
 676              	.LBB190:
 677              	.LBB191:
 457:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	node->next->prev = node->prev;
 678              		.loc 2 457 0 is_stmt 1
 679 013e D3F81C21 		ldr	r2, [r3, #284]
 680 0142 D3F81811 		ldr	r1, [r3, #280]
 681 0146 1160     		str	r1, [r2]
 682              		.loc 2 458 0
 683 0148 D3F81821 		ldr	r2, [r3, #280]
 684 014c D3F81C31 		ldr	r3, [r3, #284]
 685              	.LVL77:
 686 0150 5360     		str	r3, [r2, #4]
 687              	.LBE191:
 688              	.LBE190:
 288:../../picokernel/k_raw_timer.c **** 						actual_timer->cb(actual_timer->user_data, actual_timer);
 689              		.loc 1 288 0
 690 0152 254B     		ldr	r3, .L77+4
 691 0154 1B68     		ldr	r3, [r3]
 692 0156 9A68     		ldr	r2, [r3, #8]
 693 0158 002A     		cmp	r2, #0
 694 015a D6D1     		bne	.L72
 695 015c D8E7     		b	.L57
 696              	.LVL78:
 697              	.L70:
 698              	.LBB192:
 699              	.LBB189:
 264:../../../uLipeRtosPico/picokernel/inc/k_list.h **** }
 700              		.loc 2 264 0
 701 015e 0023     		movs	r3, #0
 702 0160 E0E7     		b	.L58
 703              	.LVL79:
 704              	.L71:
 705              	.LBE189:
 706              	.LBE192:
 297:../../picokernel/k_raw_timer.c **** 					} else {
 707              		.loc 1 297 0
 708 0162 0022     		movs	r2, #0
 709 0164 204B     		ldr	r3, .L77+4
 710 0166 1A60     		str	r2, [r3]
 711 0168 E1E7     		b	.L55
 712              	.L51:
 713              	.LBE193:
 714              	.LBE175:
 300:../../picokernel/k_raw_timer.c **** 					}
 301:../../picokernel/k_raw_timer.c **** 				}
 302:../../picokernel/k_raw_timer.c **** 
 303:../../picokernel/k_raw_timer.c **** 			}
 304:../../picokernel/k_raw_timer.c **** #endif
 305:../../picokernel/k_raw_timer.c **** 
 306:../../picokernel/k_raw_timer.c **** 			port_irq_unlock(key);
 715              		.loc 1 306 0
 716 016a 2846     		mov	r0, r5
 717 016c FFF7FEFF 		bl	port_irq_unlock
 718              	.LVL80:
 220:../../picokernel/k_raw_timer.c **** 
ARM GAS  /tmp/ccB9flSk.s 			page 30


 719              		.loc 1 220 0
 720 0170 0821     		movs	r1, #8
 721 0172 00E0     		b	.L37
 722              	.LVL81:
 723              	.L63:
 724              	.LBE147:
 725 0174 0021     		movs	r1, #0
 726              	.LVL82:
 727              	.L37:
 307:../../picokernel/k_raw_timer.c **** 
 308:../../picokernel/k_raw_timer.c **** 		}
 309:../../picokernel/k_raw_timer.c **** 
 310:../../picokernel/k_raw_timer.c **** #if((K_ENABLE_TIMERS > 0) && (K_ENABLE_TIMER_GENERIC_SUPPORT<= 0))
 311:../../picokernel/k_raw_timer.c **** 		/* select commands with priority */
 312:../../picokernel/k_raw_timer.c **** 		if(signals & K_TIMER_DISPATCH) {
 313:../../picokernel/k_raw_timer.c **** 			signals &= ~(K_TIMER_DISPATCH);
 314:../../picokernel/k_raw_timer.c **** 			clear_msk |= K_TIMER_DISPATCH;
 315:../../picokernel/k_raw_timer.c **** 			port_timer_halt();
 316:../../picokernel/k_raw_timer.c **** 
 317:../../picokernel/k_raw_timer.c **** 			/*
 318:../../picokernel/k_raw_timer.c **** 			 * we know how timer needs to be woken
 319:../../picokernel/k_raw_timer.c **** 			 */
 320:../../picokernel/k_raw_timer.c **** 			if(actual_timer->cb)
 321:../../picokernel/k_raw_timer.c **** 				actual_timer->cb(actual_timer->user_data,actual_timer);
 322:../../picokernel/k_raw_timer.c **** 
 323:../../picokernel/k_raw_timer.c **** 			/*
 324:../../picokernel/k_raw_timer.c **** 			 * thread waiting for it adds to ready list 
 325:../../picokernel/k_raw_timer.c **** 			 */
 326:../../picokernel/k_raw_timer.c **** 			if(actual_timer->threads_pending.bitmap != 0) {
 327:../../picokernel/k_raw_timer.c **** 				key = port_irq_lock();
 328:../../picokernel/k_raw_timer.c **** 				tcb_t *thr = k_unpend_obj(&actual_timer->threads_pending);
 329:../../picokernel/k_raw_timer.c **** 				ULIPE_ASSERT(thr != NULL);
 330:../../picokernel/k_raw_timer.c **** 
 331:../../picokernel/k_raw_timer.c **** 				thr->thread_wait &= ~(K_THR_PEND_TMR);
 332:../../picokernel/k_raw_timer.c **** 
 333:../../picokernel/k_raw_timer.c **** 				k_status_t err = k_make_ready(thr);
 334:../../picokernel/k_raw_timer.c **** 				ULIPE_ASSERT(err == k_status_ok);
 335:../../picokernel/k_raw_timer.c **** 
 336:../../picokernel/k_raw_timer.c **** 				/* no need to perform schedule, when timer thread 
 337:../../picokernel/k_raw_timer.c **** 				 * releases the cpu this will automatically done
 338:../../picokernel/k_raw_timer.c **** 				 */
 339:../../picokernel/k_raw_timer.c **** 				port_irq_unlock(key);
 340:../../picokernel/k_raw_timer.c **** 			}
 341:../../picokernel/k_raw_timer.c **** 
 342:../../picokernel/k_raw_timer.c **** 			key = port_irq_lock();
 343:../../picokernel/k_raw_timer.c **** 
 344:../../picokernel/k_raw_timer.c **** 			/* drops the current timer */
 345:../../picokernel/k_raw_timer.c **** 			sys_dlist_remove(&actual_timer->timer_list_link);
 346:../../picokernel/k_raw_timer.c **** 			actual_timer->running = false;
 347:../../picokernel/k_raw_timer.c **** 			actual_timer->expired = true;
 348:../../picokernel/k_raw_timer.c **** 
 349:../../picokernel/k_raw_timer.c **** 			port_irq_unlock(key);
 350:../../picokernel/k_raw_timer.c **** 
 351:../../picokernel/k_raw_timer.c **** 			/* find next timer to pend */
 352:../../picokernel/k_raw_timer.c **** 			actual_timer= timer_period_sort(&k_timed_list);
 353:../../picokernel/k_raw_timer.c **** 			if(actual_timer == NULL) {
 354:../../picokernel/k_raw_timer.c **** 				/* no timers to run */
ARM GAS  /tmp/ccB9flSk.s 			page 31


 355:../../picokernel/k_raw_timer.c **** 				no_timers = true;
 356:../../picokernel/k_raw_timer.c **** 			} else {
 357:../../picokernel/k_raw_timer.c **** 				port_timer_load_append(actual_timer->load_val);
 358:../../picokernel/k_raw_timer.c **** 				port_timer_resume();
 359:../../picokernel/k_raw_timer.c **** 			}
 360:../../picokernel/k_raw_timer.c **** 
 361:../../picokernel/k_raw_timer.c **** 		}
 362:../../picokernel/k_raw_timer.c **** 
 363:../../picokernel/k_raw_timer.c **** 
 364:../../picokernel/k_raw_timer.c **** 		if(signals & K_TIMER_REFRESH) {
 365:../../picokernel/k_raw_timer.c **** 			signals &= ~(K_TIMER_REFRESH);
 366:../../picokernel/k_raw_timer.c **** 			clear_msk |= K_TIMER_REFRESH;
 367:../../picokernel/k_raw_timer.c **** 			no_timers = false;
 368:../../picokernel/k_raw_timer.c **** 
 369:../../picokernel/k_raw_timer.c **** 			port_timer_halt();
 370:../../picokernel/k_raw_timer.c **** 			key = port_irq_lock();
 371:../../picokernel/k_raw_timer.c **** 
 372:../../picokernel/k_raw_timer.c **** 
 373:../../picokernel/k_raw_timer.c **** 			/* iterate list and schedule a new timer on timeline */
 374:../../picokernel/k_raw_timer.c **** 			ktimer_t *tmp = timer_period_sort(&k_timed_list);
 375:../../picokernel/k_raw_timer.c **** 			if(tmp != actual_timer) {
 376:../../picokernel/k_raw_timer.c **** 				actual_timer = tmp;
 377:../../picokernel/k_raw_timer.c **** 				port_timer_load_append(actual_timer->load_val);
 378:../../picokernel/k_raw_timer.c **** 
 379:../../picokernel/k_raw_timer.c **** 			}
 380:../../picokernel/k_raw_timer.c **** 			port_irq_unlock(key);
 381:../../picokernel/k_raw_timer.c **** 			port_timer_resume();
 382:../../picokernel/k_raw_timer.c **** 
 383:../../picokernel/k_raw_timer.c **** 		}
 384:../../picokernel/k_raw_timer.c **** 
 385:../../picokernel/k_raw_timer.c **** 		if(signals & K_TIMER_LOAD_FRESH) {
 386:../../picokernel/k_raw_timer.c **** 			signals &= ~(K_TIMER_LOAD_FRESH);
 387:../../picokernel/k_raw_timer.c **** 			clear_msk |= K_TIMER_LOAD_FRESH;
 388:../../picokernel/k_raw_timer.c **** 			k_list_t *head;
 389:../../picokernel/k_raw_timer.c **** 			no_timers = false;
 390:../../picokernel/k_raw_timer.c **** 
 391:../../picokernel/k_raw_timer.c **** 			key = port_irq_lock();
 392:../../picokernel/k_raw_timer.c **** 			/* gets the only available container of timed list */
 393:../../picokernel/k_raw_timer.c **** 			head = sys_dlist_peek_head(&k_timed_list);
 394:../../picokernel/k_raw_timer.c **** 			ULIPE_ASSERT(head != NULL);	
 395:../../picokernel/k_raw_timer.c **** 			actual_timer = CONTAINER_OF(head, ktimer_t, timer_list_link);
 396:../../picokernel/k_raw_timer.c **** 			port_irq_unlock(key);
 397:../../picokernel/k_raw_timer.c **** 
 398:../../picokernel/k_raw_timer.c **** 
 399:../../picokernel/k_raw_timer.c **** 			/* no timers running so put a new match value */
 400:../../picokernel/k_raw_timer.c **** 			port_start_timer(actual_timer->load_val);
 401:../../picokernel/k_raw_timer.c **** 			/* start the timeline running */
 402:../../picokernel/k_raw_timer.c **** 			no_timers = false;
 403:../../picokernel/k_raw_timer.c **** 		}
 404:../../picokernel/k_raw_timer.c **** #endif
 405:../../picokernel/k_raw_timer.c **** 		thread_clr_signals(&timer_tcb, clear_msk);
 728              		.loc 1 405 0
 729 0176 2048     		ldr	r0, .L77+20
 730 0178 FFF7FEFF 		bl	thread_clr_signals
 731              	.LVL83:
 732              	.L62:
 211:../../picokernel/k_raw_timer.c **** 			signals = thread_wait_signals(NULL, K_TIMER_LOAD_FRESH | K_TIMER_DISPATCH | K_TIMER_REFRESH | K_
ARM GAS  /tmp/ccB9flSk.s 			page 32


 733              		.loc 1 211 0
 734 017c 002C     		cmp	r4, #0
 735 017e 3FF451AF 		beq	.L73
 736              	.L35:
 218:../../picokernel/k_raw_timer.c **** 			signals &= ~(K_TIMER_TICK);
 737              		.loc 1 218 0
 738 0182 14F0080F 		tst	r4, #8
 739 0186 F5D0     		beq	.L63
 740              	.LBB195:
 219:../../picokernel/k_raw_timer.c **** 			clear_msk |= K_TIMER_TICK;
 741              		.loc 1 219 0
 742 0188 24F00804 		bic	r4, r4, #8
 743              	.LVL84:
 223:../../picokernel/k_raw_timer.c **** 			timer_step_tick();
 744              		.loc 1 223 0
 745 018c FFF7FEFF 		bl	port_irq_lock
 746              	.LVL85:
 747 0190 0546     		mov	r5, r0
 748              	.LVL86:
 224:../../picokernel/k_raw_timer.c **** 
 749              		.loc 1 224 0
 750 0192 FFF7FEFF 		bl	timer_step_tick
 751              	.LVL87:
 228:../../picokernel/k_raw_timer.c **** 				/* put this thread on ready list making it ready*/
 752              		.loc 1 228 0
 753 0196 164B     		ldr	r3, .L77+12
 754 0198 1B68     		ldr	r3, [r3]
 755 019a 5969     		ldr	r1, [r3, #20]
 756 019c 154A     		ldr	r2, .L77+16
 757 019e 1268     		ldr	r2, [r2]
 758 01a0 9142     		cmp	r1, r2
 759 01a2 82D8     		bhi	.L38
 228:../../picokernel/k_raw_timer.c **** 				/* put this thread on ready list making it ready*/
 760              		.loc 1 228 0 is_stmt 0 discriminator 1
 761 01a4 002B     		cmp	r3, #0
 762 01a6 80D0     		beq	.L38
 763              	.LBB194:
 230:../../picokernel/k_raw_timer.c **** 				sys_dlist_remove(&next_task_wake->thr_link);
 764              		.loc 1 230 0 is_stmt 1
 765 01a8 9A89     		ldrh	r2, [r3, #12]
 766 01aa 22F48072 		bic	r2, r2, #256
 767 01ae 9A81     		strh	r2, [r3, #12]	@ movhi
 768              	.LVL88:
 769              	.LBB171:
 770              	.LBB172:
 457:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	node->next->prev = node->prev;
 771              		.loc 2 457 0
 772 01b0 9A6A     		ldr	r2, [r3, #40]
 773 01b2 596A     		ldr	r1, [r3, #36]
 774 01b4 1160     		str	r1, [r2]
 775              		.loc 2 458 0
 776 01b6 5A6A     		ldr	r2, [r3, #36]
 777 01b8 9B6A     		ldr	r3, [r3, #40]
 778              	.LVL89:
 779 01ba 5360     		str	r3, [r2, #4]
 780              	.LBE172:
 781              	.LBE171:
ARM GAS  /tmp/ccB9flSk.s 			page 33


 232:../../picokernel/k_raw_timer.c **** 				ULIPE_ASSERT(err == k_status_ok);
 782              		.loc 1 232 0
 783 01bc 0C4B     		ldr	r3, .L77+12
 784 01be 1868     		ldr	r0, [r3]
 785 01c0 FFF7FEFF 		bl	k_make_ready
 786              	.LVL90:
 787              	.LBB173:
 788              	.LBB151:
 128:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 		port_set_break();
 789              		.loc 3 128 0
 790 01c4 0028     		cmp	r0, #0
 791 01c6 7FF43DAF 		bne	.L74
 792              	.LVL91:
 793              	.LBE151:
 794              	.LBE173:
 795              	.LBB174:
 796              	.LBB156:
 797              	.LBB154:
 798              	.LBB155:
 238:../../../uLipeRtosPico/picokernel/inc/k_list.h **** }
 799              		.loc 2 238 0
 800 01ca 084A     		ldr	r2, .L77+8
 801 01cc 1368     		ldr	r3, [r2]
 802              	.LVL92:
 803              	.LBE155:
 804              	.LBE154:
 264:../../../uLipeRtosPico/picokernel/inc/k_list.h **** }
 805              		.loc 2 264 0
 806 01ce 9342     		cmp	r3, r2
 807 01d0 3FF43BAF 		beq	.L75
 808              	.L41:
 809              	.LVL93:
 810              	.LBE156:
 811              	.LBE174:
 237:../../picokernel/k_raw_timer.c **** 					next_task_wake = NULL;
 812              		.loc 1 237 0
 813 01d4 002B     		cmp	r3, #0
 814 01d6 3FF43AAF 		beq	.L76
 240:../../picokernel/k_raw_timer.c **** 				}
 815              		.loc 1 240 0
 816 01da 243B     		subs	r3, r3, #36
 817 01dc 044A     		ldr	r2, .L77+12
 818 01de 1360     		str	r3, [r2]
 819 01e0 41E7     		b	.L43
 820              	.L78:
 821 01e2 00BF     		.align	2
 822              	.L77:
 823 01e4 00000000 		.word	.LANCHOR3
 824 01e8 00000000 		.word	actual_timer
 825 01ec 00000000 		.word	.LANCHOR1
 826 01f0 00000000 		.word	.LANCHOR2
 827 01f4 00000000 		.word	.LANCHOR0
 828 01f8 00000000 		.word	.LANCHOR4
 829              	.LBE194:
 830              	.LBE195:
 831              		.cfi_endproc
 832              	.LFE21:
ARM GAS  /tmp/ccB9flSk.s 			page 34


 834              		.section	.text.timer_start,"ax",%progbits
 835              		.align	1
 836              		.global	timer_start
 837              		.syntax unified
 838              		.thumb
 839              		.thumb_func
 840              		.fpu fpv4-sp-d16
 842              	timer_start:
 843              	.LFB22:
 406:../../picokernel/k_raw_timer.c **** 		clear_msk = 0;
 407:../../picokernel/k_raw_timer.c **** 
 408:../../picokernel/k_raw_timer.c **** 	}
 409:../../picokernel/k_raw_timer.c **** }
 410:../../picokernel/k_raw_timer.c **** 
 411:../../picokernel/k_raw_timer.c **** 
 412:../../picokernel/k_raw_timer.c **** 
 413:../../picokernel/k_raw_timer.c **** /** public functions */
 414:../../picokernel/k_raw_timer.c **** #if(K_ENABLE_TIMERS > 0)
 415:../../picokernel/k_raw_timer.c **** 
 416:../../picokernel/k_raw_timer.c **** k_status_t timer_start(ktimer_t *t)
 417:../../picokernel/k_raw_timer.c **** {
 844              		.loc 1 417 0
 845              		.cfi_startproc
 846              		@ args = 0, pretend = 0, frame = 0
 847              		@ frame_needed = 0, uses_anonymous_args = 0
 848              	.LVL94:
 418:../../picokernel/k_raw_timer.c **** 	k_status_t ret = k_status_ok;
 419:../../picokernel/k_raw_timer.c **** 	archtype_t key;
 420:../../picokernel/k_raw_timer.c **** 
 421:../../picokernel/k_raw_timer.c **** 	if(t == NULL) {
 849              		.loc 1 421 0
 850 0000 58B3     		cbz	r0, .L82
 417:../../picokernel/k_raw_timer.c **** 	k_status_t ret = k_status_ok;
 851              		.loc 1 417 0
 852 0002 70B5     		push	{r4, r5, r6, lr}
 853              	.LCFI2:
 854              		.cfi_def_cfa_offset 16
 855              		.cfi_offset 4, -16
 856              		.cfi_offset 5, -12
 857              		.cfi_offset 6, -8
 858              		.cfi_offset 14, -4
 859 0004 0546     		mov	r5, r0
 422:../../picokernel/k_raw_timer.c **** 		ret = k_status_invalid_param;
 423:../../picokernel/k_raw_timer.c **** 		goto cleanup;
 424:../../picokernel/k_raw_timer.c **** 	}
 425:../../picokernel/k_raw_timer.c **** 	
 426:../../picokernel/k_raw_timer.c **** 	if(t->running){
 860              		.loc 1 426 0
 861 0006 827C     		ldrb	r2, [r0, #18]	@ zero_extendqisi2
 862 0008 0AB1     		cbz	r2, .L89
 427:../../picokernel/k_raw_timer.c **** 		ret = k_timer_running;
 863              		.loc 1 427 0
 864 000a 1020     		movs	r0, #16
 865              	.LVL95:
 866 000c 70BD     		pop	{r4, r5, r6, pc}
 867              	.LVL96:
 868              	.L89:
ARM GAS  /tmp/ccB9flSk.s 			page 35


 428:../../picokernel/k_raw_timer.c **** 		goto cleanup;
 429:../../picokernel/k_raw_timer.c **** 	}
 430:../../picokernel/k_raw_timer.c **** 
 431:../../picokernel/k_raw_timer.c **** 	if(!t->timer_to_wait) {
 869              		.loc 1 431 0
 870 000e 4268     		ldr	r2, [r0, #4]
 871 0010 0AB9     		cbnz	r2, .L90
 432:../../picokernel/k_raw_timer.c **** 		/* timer not loaded cannot start */
 433:../../picokernel/k_raw_timer.c **** 		ret = k_status_invalid_param;
 872              		.loc 1 433 0
 873 0012 0220     		movs	r0, #2
 874              	.LVL97:
 875              	.L80:
 434:../../picokernel/k_raw_timer.c **** 		goto cleanup;
 435:../../picokernel/k_raw_timer.c **** 	}
 436:../../picokernel/k_raw_timer.c **** 
 437:../../picokernel/k_raw_timer.c **** 
 438:../../picokernel/k_raw_timer.c **** 	key = port_irq_lock();
 439:../../picokernel/k_raw_timer.c **** 
 440:../../picokernel/k_raw_timer.c **** 	if(!t->created) {
 441:../../picokernel/k_raw_timer.c **** 		t->created = true;
 442:../../picokernel/k_raw_timer.c **** 		k_work_list_init(&t->threads_pending);
 443:../../picokernel/k_raw_timer.c **** 		sys_dlist_init(&t->timer_list_link);
 444:../../picokernel/k_raw_timer.c **** 
 445:../../picokernel/k_raw_timer.c **** 	}
 446:../../picokernel/k_raw_timer.c **** 
 447:../../picokernel/k_raw_timer.c **** 
 448:../../picokernel/k_raw_timer.c **** 	t->expired = false;
 449:../../picokernel/k_raw_timer.c **** 
 450:../../picokernel/k_raw_timer.c **** 
 451:../../picokernel/k_raw_timer.c **** #if (K_ENABLE_TIMER_GENERIC_SUPPORT > 0)
 452:../../picokernel/k_raw_timer.c **** 	t->load_val = t->timer_to_wait + tick_count;
 453:../../picokernel/k_raw_timer.c **** 	sys_dlist_append(&k_timed_list, &t->timer_list_link);
 454:../../picokernel/k_raw_timer.c **** 
 455:../../picokernel/k_raw_timer.c **** #else
 456:../../picokernel/k_raw_timer.c **** 
 457:../../picokernel/k_raw_timer.c **** 	/* new valid timer added to list 
 458:../../picokernel/k_raw_timer.c **** 	 * insert it on timeline
 459:../../picokernel/k_raw_timer.c **** 	 */
 460:../../picokernel/k_raw_timer.c **** 
 461:../../picokernel/k_raw_timer.c **** 	timer_rebuild_timeline(t, &key);
 462:../../picokernel/k_raw_timer.c **** #endif
 463:../../picokernel/k_raw_timer.c **** 
 464:../../picokernel/k_raw_timer.c **** 	port_irq_unlock(key);
 465:../../picokernel/k_raw_timer.c **** 
 466:../../picokernel/k_raw_timer.c **** cleanup:
 467:../../picokernel/k_raw_timer.c **** 	return(ret);
 468:../../picokernel/k_raw_timer.c **** 
 469:../../picokernel/k_raw_timer.c **** }
 876              		.loc 1 469 0
 877 0014 70BD     		pop	{r4, r5, r6, pc}
 878              	.LVL98:
 879              	.L90:
 438:../../picokernel/k_raw_timer.c **** 
 880              		.loc 1 438 0
 881 0016 FFF7FEFF 		bl	port_irq_lock
 882              	.LVL99:
ARM GAS  /tmp/ccB9flSk.s 			page 36


 883 001a 0646     		mov	r6, r0
 884              	.LVL100:
 440:../../picokernel/k_raw_timer.c **** 		t->created = true;
 885              		.loc 1 440 0
 886 001c 6B7C     		ldrb	r3, [r5, #17]	@ zero_extendqisi2
 887 001e ABB1     		cbz	r3, .L91
 888              	.LVL101:
 889              	.L81:
 448:../../picokernel/k_raw_timer.c **** 
 890              		.loc 1 448 0
 891 0020 0024     		movs	r4, #0
 892 0022 2C74     		strb	r4, [r5, #16]
 452:../../picokernel/k_raw_timer.c **** 	sys_dlist_append(&k_timed_list, &t->timer_list_link);
 893              		.loc 1 452 0
 894 0024 6B68     		ldr	r3, [r5, #4]
 895 0026 0E4A     		ldr	r2, .L92
 896 0028 1268     		ldr	r2, [r2]
 897 002a 1344     		add	r3, r3, r2
 898 002c 2B60     		str	r3, [r5]
 453:../../picokernel/k_raw_timer.c **** 
 899              		.loc 1 453 0
 900 002e 05F58C72 		add	r2, r5, #280
 901              	.LVL102:
 902              	.LBB196:
 903              	.LBB197:
 339:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	node->prev = list->tail;
 904              		.loc 2 339 0
 905 0032 0C4B     		ldr	r3, .L92+4
 906 0034 C5F81831 		str	r3, [r5, #280]
 340:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 
 907              		.loc 2 340 0
 908 0038 5968     		ldr	r1, [r3, #4]
 909 003a C5F81C11 		str	r1, [r5, #284]
 342:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	list->tail = node;
 910              		.loc 2 342 0
 911 003e 0A60     		str	r2, [r1]
 343:../../../uLipeRtosPico/picokernel/inc/k_list.h **** }
 912              		.loc 2 343 0
 913 0040 5A60     		str	r2, [r3, #4]
 914              	.LVL103:
 915              	.LBE197:
 916              	.LBE196:
 464:../../picokernel/k_raw_timer.c **** 
 917              		.loc 1 464 0
 918 0042 3046     		mov	r0, r6
 919 0044 FFF7FEFF 		bl	port_irq_unlock
 920              	.LVL104:
 418:../../picokernel/k_raw_timer.c **** 	archtype_t key;
 921              		.loc 1 418 0
 922 0048 2046     		mov	r0, r4
 923 004a 70BD     		pop	{r4, r5, r6, pc}
 924              	.LVL105:
 925              	.L91:
 441:../../picokernel/k_raw_timer.c **** 		k_work_list_init(&t->threads_pending);
 926              		.loc 1 441 0
 927 004c 0123     		movs	r3, #1
 928 004e 6B74     		strb	r3, [r5, #17]
ARM GAS  /tmp/ccB9flSk.s 			page 37


 442:../../picokernel/k_raw_timer.c **** 		sys_dlist_init(&t->timer_list_link);
 929              		.loc 1 442 0
 930 0050 05F11400 		add	r0, r5, #20
 931              	.LVL106:
 932 0054 FFF7FEFF 		bl	k_work_list_init
 933              	.LVL107:
 934 0058 E2E7     		b	.L81
 935              	.LVL108:
 936              	.L82:
 937              	.LCFI3:
 938              		.cfi_def_cfa_offset 0
 939              		.cfi_restore 4
 940              		.cfi_restore 5
 941              		.cfi_restore 6
 942              		.cfi_restore 14
 422:../../picokernel/k_raw_timer.c **** 		goto cleanup;
 943              		.loc 1 422 0
 944 005a 0220     		movs	r0, #2
 945              	.LVL109:
 946 005c 7047     		bx	lr
 947              	.L93:
 948 005e 00BF     		.align	2
 949              	.L92:
 950 0060 00000000 		.word	.LANCHOR0
 951 0064 00000000 		.word	.LANCHOR3
 952              		.cfi_endproc
 953              	.LFE22:
 955              		.section	.text.timer_stop,"ax",%progbits
 956              		.align	1
 957              		.global	timer_stop
 958              		.syntax unified
 959              		.thumb
 960              		.thumb_func
 961              		.fpu fpv4-sp-d16
 963              	timer_stop:
 964              	.LFB23:
 470:../../picokernel/k_raw_timer.c **** 
 471:../../picokernel/k_raw_timer.c **** 
 472:../../picokernel/k_raw_timer.c **** k_status_t timer_stop(ktimer_t *t)
 473:../../picokernel/k_raw_timer.c **** {
 965              		.loc 1 473 0
 966              		.cfi_startproc
 967              		@ args = 0, pretend = 0, frame = 0
 968              		@ frame_needed = 0, uses_anonymous_args = 0
 969              	.LVL110:
 474:../../picokernel/k_raw_timer.c **** 	k_status_t ret = k_status_ok;
 475:../../picokernel/k_raw_timer.c **** 	archtype_t key;
 476:../../picokernel/k_raw_timer.c **** 
 477:../../picokernel/k_raw_timer.c **** 	if(t == NULL) {
 970              		.loc 1 477 0
 971 0000 0028     		cmp	r0, #0
 972 0002 39D0     		beq	.L100
 473:../../picokernel/k_raw_timer.c **** 	k_status_t ret = k_status_ok;
 973              		.loc 1 473 0
 974 0004 38B5     		push	{r3, r4, r5, lr}
 975              	.LCFI4:
 976              		.cfi_def_cfa_offset 16
ARM GAS  /tmp/ccB9flSk.s 			page 38


 977              		.cfi_offset 3, -16
 978              		.cfi_offset 4, -12
 979              		.cfi_offset 5, -8
 980              		.cfi_offset 14, -4
 981 0006 0446     		mov	r4, r0
 478:../../picokernel/k_raw_timer.c **** 		ret = k_status_invalid_param;
 479:../../picokernel/k_raw_timer.c **** 		goto cleanup;
 480:../../picokernel/k_raw_timer.c **** 	}
 481:../../picokernel/k_raw_timer.c **** 
 482:../../picokernel/k_raw_timer.c **** 	if(t->expired){
 982              		.loc 1 482 0
 983 0008 027C     		ldrb	r2, [r0, #16]	@ zero_extendqisi2
 984 000a 0AB1     		cbz	r2, .L106
 483:../../picokernel/k_raw_timer.c **** 		ret = k_timer_expired;
 985              		.loc 1 483 0
 986 000c 0F20     		movs	r0, #15
 987              	.LVL111:
 988              	.L95:
 484:../../picokernel/k_raw_timer.c **** 		goto cleanup;
 485:../../picokernel/k_raw_timer.c **** 	}
 486:../../picokernel/k_raw_timer.c **** 
 487:../../picokernel/k_raw_timer.c **** 
 488:../../picokernel/k_raw_timer.c **** 
 489:../../picokernel/k_raw_timer.c **** 	key = port_irq_lock();
 490:../../picokernel/k_raw_timer.c **** 
 491:../../picokernel/k_raw_timer.c **** 	if(!t->created) {
 492:../../picokernel/k_raw_timer.c **** 		t->created = true;
 493:../../picokernel/k_raw_timer.c **** 		k_work_list_init(&t->threads_pending);
 494:../../picokernel/k_raw_timer.c **** 		sys_dlist_init(&t->timer_list_link);
 495:../../picokernel/k_raw_timer.c **** 
 496:../../picokernel/k_raw_timer.c **** 	}
 497:../../picokernel/k_raw_timer.c **** 
 498:../../picokernel/k_raw_timer.c **** 
 499:../../picokernel/k_raw_timer.c **** 	t->running = false;
 500:../../picokernel/k_raw_timer.c **** 	t->expired = true;
 501:../../picokernel/k_raw_timer.c **** 
 502:../../picokernel/k_raw_timer.c **** 
 503:../../picokernel/k_raw_timer.c **** #if (K_ENABLE_TIMER_GENERIC_SUPPORT > 0)
 504:../../picokernel/k_raw_timer.c **** 	sys_dlist_remove(&t->timer_list_link);
 505:../../picokernel/k_raw_timer.c **** 
 506:../../picokernel/k_raw_timer.c **** 	/* get the next task */
 507:../../picokernel/k_raw_timer.c **** 	k_list_t *head = sys_dlist_peek_head(&k_timed_list);
 508:../../picokernel/k_raw_timer.c **** 	if(!head) {
 509:../../picokernel/k_raw_timer.c **** 		actual_timer = NULL;
 510:../../picokernel/k_raw_timer.c **** 	} else {
 511:../../picokernel/k_raw_timer.c **** 		actual_timer = CONTAINER_OF(head, ktimer_t, timer_list_link);
 512:../../picokernel/k_raw_timer.c **** 	}
 513:../../picokernel/k_raw_timer.c **** 
 514:../../picokernel/k_raw_timer.c **** #else
 515:../../picokernel/k_raw_timer.c **** 	port_timer_halt();
 516:../../picokernel/k_raw_timer.c **** 	sys_dlist_remove(&t->timer_list_link);
 517:../../picokernel/k_raw_timer.c **** 
 518:../../picokernel/k_raw_timer.c **** 	/* new valid timer added to list
 519:../../picokernel/k_raw_timer.c **** 	 * insert it on timeline
 520:../../picokernel/k_raw_timer.c **** 	 */
 521:../../picokernel/k_raw_timer.c **** 	actual_timer= timer_period_sort(&k_timed_list);
 522:../../picokernel/k_raw_timer.c **** 	if(actual_timer == NULL) {
ARM GAS  /tmp/ccB9flSk.s 			page 39


 523:../../picokernel/k_raw_timer.c **** 		/* no timers to run */
 524:../../picokernel/k_raw_timer.c **** 		no_timers = true;
 525:../../picokernel/k_raw_timer.c **** 	} else {
 526:../../picokernel/k_raw_timer.c **** 		port_timer_load_append(actual_timer->load_val);
 527:../../picokernel/k_raw_timer.c **** 		port_timer_resume();
 528:../../picokernel/k_raw_timer.c **** 	}
 529:../../picokernel/k_raw_timer.c **** 
 530:../../picokernel/k_raw_timer.c **** #endif
 531:../../picokernel/k_raw_timer.c **** 
 532:../../picokernel/k_raw_timer.c **** 	port_irq_unlock(key);
 533:../../picokernel/k_raw_timer.c **** 
 534:../../picokernel/k_raw_timer.c **** cleanup:
 535:../../picokernel/k_raw_timer.c **** 	return(ret);
 536:../../picokernel/k_raw_timer.c **** 
 537:../../picokernel/k_raw_timer.c **** }
 989              		.loc 1 537 0
 990 000e 38BD     		pop	{r3, r4, r5, pc}
 991              	.LVL112:
 992              	.L106:
 489:../../picokernel/k_raw_timer.c **** 
 993              		.loc 1 489 0
 994 0010 FFF7FEFF 		bl	port_irq_lock
 995              	.LVL113:
 996 0014 0546     		mov	r5, r0
 997              	.LVL114:
 491:../../picokernel/k_raw_timer.c **** 		t->created = true;
 998              		.loc 1 491 0
 999 0016 637C     		ldrb	r3, [r4, #17]	@ zero_extendqisi2
 1000 0018 DBB1     		cbz	r3, .L107
 1001              	.LVL115:
 1002              	.L96:
 499:../../picokernel/k_raw_timer.c **** 	t->expired = true;
 1003              		.loc 1 499 0
 1004 001a 0023     		movs	r3, #0
 1005 001c A374     		strb	r3, [r4, #18]
 500:../../picokernel/k_raw_timer.c **** 
 1006              		.loc 1 500 0
 1007 001e 0123     		movs	r3, #1
 1008 0020 2374     		strb	r3, [r4, #16]
 1009              	.LVL116:
 1010              	.LBB198:
 1011              	.LBB199:
 457:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	node->next->prev = node->prev;
 1012              		.loc 2 457 0
 1013 0022 D4F81C31 		ldr	r3, [r4, #284]
 1014 0026 D4F81821 		ldr	r2, [r4, #280]
 1015 002a 1A60     		str	r2, [r3]
 1016              		.loc 2 458 0
 1017 002c D4F81831 		ldr	r3, [r4, #280]
 1018 0030 D4F81C21 		ldr	r2, [r4, #284]
 1019 0034 5A60     		str	r2, [r3, #4]
 1020              	.LVL117:
 1021              	.LBE199:
 1022              	.LBE198:
 1023              	.LBB200:
 1024              	.LBB201:
 1025              	.LBB202:
ARM GAS  /tmp/ccB9flSk.s 			page 40


 1026              	.LBB203:
 238:../../../uLipeRtosPico/picokernel/inc/k_list.h **** }
 1027              		.loc 2 238 0
 1028 0036 114A     		ldr	r2, .L110
 1029 0038 1368     		ldr	r3, [r2]
 1030              	.LVL118:
 1031              	.LBE203:
 1032              	.LBE202:
 264:../../../uLipeRtosPico/picokernel/inc/k_list.h **** }
 1033              		.loc 2 264 0
 1034 003a 9342     		cmp	r3, r2
 1035 003c 16D0     		beq	.L108
 1036              	.L97:
 1037              	.LVL119:
 1038              	.LBE201:
 1039              	.LBE200:
 508:../../picokernel/k_raw_timer.c **** 		actual_timer = NULL;
 1040              		.loc 1 508 0
 1041 003e BBB1     		cbz	r3, .L109
 511:../../picokernel/k_raw_timer.c **** 	}
 1042              		.loc 1 511 0
 1043 0040 A3F58C73 		sub	r3, r3, #280
 1044 0044 0E4A     		ldr	r2, .L110+4
 1045 0046 1360     		str	r3, [r2]
 1046              	.L99:
 532:../../picokernel/k_raw_timer.c **** 
 1047              		.loc 1 532 0
 1048 0048 2846     		mov	r0, r5
 1049 004a FFF7FEFF 		bl	port_irq_unlock
 1050              	.LVL120:
 474:../../picokernel/k_raw_timer.c **** 	archtype_t key;
 1051              		.loc 1 474 0
 1052 004e 0020     		movs	r0, #0
 1053 0050 38BD     		pop	{r3, r4, r5, pc}
 1054              	.LVL121:
 1055              	.L107:
 492:../../picokernel/k_raw_timer.c **** 		k_work_list_init(&t->threads_pending);
 1056              		.loc 1 492 0
 1057 0052 0123     		movs	r3, #1
 1058 0054 6374     		strb	r3, [r4, #17]
 493:../../picokernel/k_raw_timer.c **** 		sys_dlist_init(&t->timer_list_link);
 1059              		.loc 1 493 0
 1060 0056 04F11400 		add	r0, r4, #20
 1061              	.LVL122:
 1062 005a FFF7FEFF 		bl	k_work_list_init
 1063              	.LVL123:
 494:../../picokernel/k_raw_timer.c **** 
 1064              		.loc 1 494 0
 1065 005e 04F58C73 		add	r3, r4, #280
 1066              	.LVL124:
 1067              	.LBB205:
 1068              	.LBB206:
 194:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	list->tail = (sys_dnode_t *)list;
 1069              		.loc 2 194 0
 1070 0062 C4F81831 		str	r3, [r4, #280]
 195:../../../uLipeRtosPico/picokernel/inc/k_list.h **** }
 1071              		.loc 2 195 0
ARM GAS  /tmp/ccB9flSk.s 			page 41


 1072 0066 C4F81C31 		str	r3, [r4, #284]
 1073 006a D6E7     		b	.L96
 1074              	.LVL125:
 1075              	.L108:
 1076              	.LBE206:
 1077              	.LBE205:
 1078              	.LBB207:
 1079              	.LBB204:
 264:../../../uLipeRtosPico/picokernel/inc/k_list.h **** }
 1080              		.loc 2 264 0
 1081 006c 0023     		movs	r3, #0
 1082 006e E6E7     		b	.L97
 1083              	.LVL126:
 1084              	.L109:
 1085              	.LBE204:
 1086              	.LBE207:
 509:../../picokernel/k_raw_timer.c **** 	} else {
 1087              		.loc 1 509 0
 1088 0070 0022     		movs	r2, #0
 1089 0072 034B     		ldr	r3, .L110+4
 1090 0074 1A60     		str	r2, [r3]
 1091 0076 E7E7     		b	.L99
 1092              	.LVL127:
 1093              	.L100:
 1094              	.LCFI5:
 1095              		.cfi_def_cfa_offset 0
 1096              		.cfi_restore 3
 1097              		.cfi_restore 4
 1098              		.cfi_restore 5
 1099              		.cfi_restore 14
 478:../../picokernel/k_raw_timer.c **** 		goto cleanup;
 1100              		.loc 1 478 0
 1101 0078 0220     		movs	r0, #2
 1102              	.LVL128:
 1103 007a 7047     		bx	lr
 1104              	.L111:
 1105              		.align	2
 1106              	.L110:
 1107 007c 00000000 		.word	.LANCHOR3
 1108 0080 00000000 		.word	actual_timer
 1109              		.cfi_endproc
 1110              	.LFE23:
 1112              		.section	.text.timer_poll,"ax",%progbits
 1113              		.align	1
 1114              		.global	timer_poll
 1115              		.syntax unified
 1116              		.thumb
 1117              		.thumb_func
 1118              		.fpu fpv4-sp-d16
 1120              	timer_poll:
 1121              	.LFB24:
 538:../../picokernel/k_raw_timer.c **** 
 539:../../picokernel/k_raw_timer.c **** 
 540:../../picokernel/k_raw_timer.c **** k_status_t timer_poll(ktimer_t *t)
 541:../../picokernel/k_raw_timer.c **** {
 1122              		.loc 1 541 0
 1123              		.cfi_startproc
ARM GAS  /tmp/ccB9flSk.s 			page 42


 1124              		@ args = 0, pretend = 0, frame = 0
 1125              		@ frame_needed = 0, uses_anonymous_args = 0
 1126              		@ link register save eliminated.
 1127              	.LVL129:
 542:../../picokernel/k_raw_timer.c **** 	k_status_t ret = k_status_ok;
 543:../../picokernel/k_raw_timer.c **** 
 544:../../picokernel/k_raw_timer.c **** /* timer in generic support not allows the poll function,
 545:../../picokernel/k_raw_timer.c ****  * use the ticker timer wait
 546:../../picokernel/k_raw_timer.c ****  */
 547:../../picokernel/k_raw_timer.c **** #ifndef K_ENABLE_TIMER_GENERIC_SUPPORT
 548:../../picokernel/k_raw_timer.c **** 
 549:../../picokernel/k_raw_timer.c **** 	archtype_t key;
 550:../../picokernel/k_raw_timer.c **** 
 551:../../picokernel/k_raw_timer.c **** 
 552:../../picokernel/k_raw_timer.c **** 	if(t == NULL) {
 553:../../picokernel/k_raw_timer.c **** 		ret = k_status_invalid_param;
 554:../../picokernel/k_raw_timer.c **** 		goto cleanup;
 555:../../picokernel/k_raw_timer.c **** 	}
 556:../../picokernel/k_raw_timer.c **** 
 557:../../picokernel/k_raw_timer.c **** 	if(!t->running) {
 558:../../picokernel/k_raw_timer.c **** 		/* timer must be running */
 559:../../picokernel/k_raw_timer.c **** 		ret = k_timer_stopped;
 560:../../picokernel/k_raw_timer.c **** 		goto cleanup;
 561:../../picokernel/k_raw_timer.c **** 	}
 562:../../picokernel/k_raw_timer.c **** 
 563:../../picokernel/k_raw_timer.c **** 	key = port_irq_lock();
 564:../../picokernel/k_raw_timer.c **** 
 565:../../picokernel/k_raw_timer.c **** 	if(!t->created) {
 566:../../picokernel/k_raw_timer.c **** 		t->created = true;
 567:../../picokernel/k_raw_timer.c **** 		k_work_list_init(&t->threads_pending);
 568:../../picokernel/k_raw_timer.c **** 		sys_dlist_init(&t->timer_list_link);
 569:../../picokernel/k_raw_timer.c **** 	}
 570:../../picokernel/k_raw_timer.c **** 
 571:../../picokernel/k_raw_timer.c **** 
 572:../../picokernel/k_raw_timer.c **** 	/* only one thread per timer can poll */
 573:../../picokernel/k_raw_timer.c **** 	if(t->threads_pending.bitmap) {
 574:../../picokernel/k_raw_timer.c **** 		ret = k_timer_busy;
 575:../../picokernel/k_raw_timer.c **** 		port_irq_unlock(key);
 576:../../picokernel/k_raw_timer.c **** 		goto cleanup;
 577:../../picokernel/k_raw_timer.c **** 	}
 578:../../picokernel/k_raw_timer.c **** 
 579:../../picokernel/k_raw_timer.c **** 	/* check if timer is already expired */
 580:../../picokernel/k_raw_timer.c **** 	if(t->expired){
 581:../../picokernel/k_raw_timer.c **** 		ret = k_timer_expired;
 582:../../picokernel/k_raw_timer.c **** 		port_irq_unlock(key);
 583:../../picokernel/k_raw_timer.c **** 		goto cleanup;
 584:../../picokernel/k_raw_timer.c **** 	}	
 585:../../picokernel/k_raw_timer.c **** 
 586:../../picokernel/k_raw_timer.c **** 	/* 
 587:../../picokernel/k_raw_timer.c **** 	 * If it safe to poll timer, sleep thread
 588:../../picokernel/k_raw_timer.c **** 	 * until the dispatcher wakes it up.
 589:../../picokernel/k_raw_timer.c **** 	 */
 590:../../picokernel/k_raw_timer.c **** 
 591:../../picokernel/k_raw_timer.c **** 
 592:../../picokernel/k_raw_timer.c **** 	tcb_t *thr = thread_get_current();
 593:../../picokernel/k_raw_timer.c **** 	ULIPE_ASSERT(thr != NULL);
 594:../../picokernel/k_raw_timer.c **** 
ARM GAS  /tmp/ccB9flSk.s 			page 43


 595:../../picokernel/k_raw_timer.c **** 	ret = k_make_not_ready(thr);
 596:../../picokernel/k_raw_timer.c **** 	ULIPE_ASSERT(ret == k_status_ok);
 597:../../picokernel/k_raw_timer.c **** 	thr->thread_wait |= K_THR_PEND_TMR;
 598:../../picokernel/k_raw_timer.c **** 
 599:../../picokernel/k_raw_timer.c **** 	ret = k_pend_obj(thr, &t->threads_pending);
 600:../../picokernel/k_raw_timer.c **** 	ULIPE_ASSERT(ret == k_status_ok);
 601:../../picokernel/k_raw_timer.c **** 	port_irq_unlock(key);
 602:../../picokernel/k_raw_timer.c **** 
 603:../../picokernel/k_raw_timer.c **** 	/* reescheduling is needed */
 604:../../picokernel/k_raw_timer.c **** 	ret = k_sched_and_swap();
 605:../../picokernel/k_raw_timer.c **** 	ULIPE_ASSERT(ret == k_status_ok);	
 606:../../picokernel/k_raw_timer.c **** 
 607:../../picokernel/k_raw_timer.c **** cleanup:
 608:../../picokernel/k_raw_timer.c **** #endif
 609:../../picokernel/k_raw_timer.c **** 
 610:../../picokernel/k_raw_timer.c **** 	return(ret);
 611:../../picokernel/k_raw_timer.c **** 
 612:../../picokernel/k_raw_timer.c **** }
 1128              		.loc 1 612 0
 1129 0000 0020     		movs	r0, #0
 1130              	.LVL130:
 1131 0002 7047     		bx	lr
 1132              		.cfi_endproc
 1133              	.LFE24:
 1135              		.section	.text.timer_set_callback,"ax",%progbits
 1136              		.align	1
 1137              		.global	timer_set_callback
 1138              		.syntax unified
 1139              		.thumb
 1140              		.thumb_func
 1141              		.fpu fpv4-sp-d16
 1143              	timer_set_callback:
 1144              	.LFB25:
 613:../../picokernel/k_raw_timer.c **** 
 614:../../picokernel/k_raw_timer.c **** 
 615:../../picokernel/k_raw_timer.c **** 
 616:../../picokernel/k_raw_timer.c **** k_status_t timer_set_callback(ktimer_t *t, ktimer_callback_t cb, void *user_data)
 617:../../picokernel/k_raw_timer.c **** {
 1145              		.loc 1 617 0
 1146              		.cfi_startproc
 1147              		@ args = 0, pretend = 0, frame = 0
 1148              		@ frame_needed = 0, uses_anonymous_args = 0
 1149              	.LVL131:
 618:../../picokernel/k_raw_timer.c **** 	k_status_t ret = k_status_ok;
 619:../../picokernel/k_raw_timer.c **** 	archtype_t key;
 620:../../picokernel/k_raw_timer.c **** 
 621:../../picokernel/k_raw_timer.c **** 	if(t == NULL) {
 1150              		.loc 1 621 0
 1151 0000 28B3     		cbz	r0, .L118
 617:../../picokernel/k_raw_timer.c **** 	k_status_t ret = k_status_ok;
 1152              		.loc 1 617 0
 1153 0002 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 1154              	.LCFI6:
 1155              		.cfi_def_cfa_offset 24
 1156              		.cfi_offset 3, -24
 1157              		.cfi_offset 4, -20
 1158              		.cfi_offset 5, -16
ARM GAS  /tmp/ccB9flSk.s 			page 44


 1159              		.cfi_offset 6, -12
 1160              		.cfi_offset 7, -8
 1161              		.cfi_offset 14, -4
 1162 0004 0446     		mov	r4, r0
 622:../../picokernel/k_raw_timer.c **** 		ret = k_status_invalid_param;
 623:../../picokernel/k_raw_timer.c **** 		goto cleanup;
 624:../../picokernel/k_raw_timer.c **** 	}
 625:../../picokernel/k_raw_timer.c **** 
 626:../../picokernel/k_raw_timer.c **** 	if(cb == NULL) {
 1163              		.loc 1 626 0
 1164 0006 21B3     		cbz	r1, .L119
 1165 0008 1646     		mov	r6, r2
 1166 000a 0D46     		mov	r5, r1
 627:../../picokernel/k_raw_timer.c **** 		ret = k_status_invalid_param;
 628:../../picokernel/k_raw_timer.c **** 		goto cleanup;		
 629:../../picokernel/k_raw_timer.c **** 	}
 630:../../picokernel/k_raw_timer.c **** 
 631:../../picokernel/k_raw_timer.c **** 	key = port_irq_lock();
 1167              		.loc 1 631 0
 1168 000c FFF7FEFF 		bl	port_irq_lock
 1169              	.LVL132:
 1170 0010 0746     		mov	r7, r0
 1171              	.LVL133:
 632:../../picokernel/k_raw_timer.c **** 
 633:../../picokernel/k_raw_timer.c **** 	if(!t->created) {
 1172              		.loc 1 633 0
 1173 0012 637C     		ldrb	r3, [r4, #17]	@ zero_extendqisi2
 1174 0014 4BB1     		cbz	r3, .L124
 1175              	.LVL134:
 1176              	.L115:
 634:../../picokernel/k_raw_timer.c **** 		t->created = true;
 635:../../picokernel/k_raw_timer.c **** 		k_work_list_init(&t->threads_pending);
 636:../../picokernel/k_raw_timer.c **** 		sys_dlist_init(&t->timer_list_link);
 637:../../picokernel/k_raw_timer.c **** 
 638:../../picokernel/k_raw_timer.c **** 	}
 639:../../picokernel/k_raw_timer.c **** 
 640:../../picokernel/k_raw_timer.c **** 
 641:../../picokernel/k_raw_timer.c **** 	if(t->running) {
 1177              		.loc 1 641 0
 1178 0016 A37C     		ldrb	r3, [r4, #18]	@ zero_extendqisi2
 1179 0018 A3B9     		cbnz	r3, .L125
 642:../../picokernel/k_raw_timer.c **** 		ret = k_timer_running;
 643:../../picokernel/k_raw_timer.c **** 		port_irq_unlock(key);
 644:../../picokernel/k_raw_timer.c **** 		goto cleanup;
 645:../../picokernel/k_raw_timer.c **** 	}
 646:../../picokernel/k_raw_timer.c **** 
 647:../../picokernel/k_raw_timer.c **** 	t->cb = cb;
 1180              		.loc 1 647 0
 1181 001a A560     		str	r5, [r4, #8]
 648:../../picokernel/k_raw_timer.c **** 	if(user_data)
 1182              		.loc 1 648 0
 1183 001c 06B1     		cbz	r6, .L117
 649:../../picokernel/k_raw_timer.c **** 		t->user_data = user_data;
 1184              		.loc 1 649 0
 1185 001e E660     		str	r6, [r4, #12]
 1186              	.L117:
 650:../../picokernel/k_raw_timer.c **** 
ARM GAS  /tmp/ccB9flSk.s 			page 45


 651:../../picokernel/k_raw_timer.c **** 	port_irq_unlock(key);
 1187              		.loc 1 651 0
 1188 0020 3846     		mov	r0, r7
 1189 0022 FFF7FEFF 		bl	port_irq_unlock
 1190              	.LVL135:
 618:../../picokernel/k_raw_timer.c **** 	archtype_t key;
 1191              		.loc 1 618 0
 1192 0026 0020     		movs	r0, #0
 1193 0028 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1194              	.LVL136:
 1195              	.L124:
 634:../../picokernel/k_raw_timer.c **** 		k_work_list_init(&t->threads_pending);
 1196              		.loc 1 634 0
 1197 002a 0123     		movs	r3, #1
 1198 002c 6374     		strb	r3, [r4, #17]
 635:../../picokernel/k_raw_timer.c **** 		sys_dlist_init(&t->timer_list_link);
 1199              		.loc 1 635 0
 1200 002e 04F11400 		add	r0, r4, #20
 1201              	.LVL137:
 1202 0032 FFF7FEFF 		bl	k_work_list_init
 1203              	.LVL138:
 636:../../picokernel/k_raw_timer.c **** 
 1204              		.loc 1 636 0
 1205 0036 04F58C73 		add	r3, r4, #280
 1206              	.LVL139:
 1207              	.LBB208:
 1208              	.LBB209:
 194:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	list->tail = (sys_dnode_t *)list;
 1209              		.loc 2 194 0
 1210 003a C4F81831 		str	r3, [r4, #280]
 195:../../../uLipeRtosPico/picokernel/inc/k_list.h **** }
 1211              		.loc 2 195 0
 1212 003e C4F81C31 		str	r3, [r4, #284]
 1213 0042 E8E7     		b	.L115
 1214              	.LVL140:
 1215              	.L125:
 1216              	.LBE209:
 1217              	.LBE208:
 643:../../picokernel/k_raw_timer.c **** 		goto cleanup;
 1218              		.loc 1 643 0
 1219 0044 3846     		mov	r0, r7
 1220 0046 FFF7FEFF 		bl	port_irq_unlock
 1221              	.LVL141:
 642:../../picokernel/k_raw_timer.c **** 		port_irq_unlock(key);
 1222              		.loc 1 642 0
 1223 004a 1020     		movs	r0, #16
 644:../../picokernel/k_raw_timer.c **** 	}
 1224              		.loc 1 644 0
 1225 004c F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1226              	.LVL142:
 1227              	.L118:
 1228              	.LCFI7:
 1229              		.cfi_def_cfa_offset 0
 1230              		.cfi_restore 3
 1231              		.cfi_restore 4
 1232              		.cfi_restore 5
 1233              		.cfi_restore 6
ARM GAS  /tmp/ccB9flSk.s 			page 46


 1234              		.cfi_restore 7
 1235              		.cfi_restore 14
 622:../../picokernel/k_raw_timer.c **** 		goto cleanup;
 1236              		.loc 1 622 0
 1237 004e 0220     		movs	r0, #2
 1238              	.LVL143:
 1239 0050 7047     		bx	lr
 1240              	.LVL144:
 1241              	.L119:
 1242              	.LCFI8:
 1243              		.cfi_def_cfa_offset 24
 1244              		.cfi_offset 3, -24
 1245              		.cfi_offset 4, -20
 1246              		.cfi_offset 5, -16
 1247              		.cfi_offset 6, -12
 1248              		.cfi_offset 7, -8
 1249              		.cfi_offset 14, -4
 627:../../picokernel/k_raw_timer.c **** 		goto cleanup;		
 1250              		.loc 1 627 0
 1251 0052 0220     		movs	r0, #2
 1252              	.LVL145:
 1253              	.L114:
 652:../../picokernel/k_raw_timer.c **** 
 653:../../picokernel/k_raw_timer.c **** cleanup:
 654:../../picokernel/k_raw_timer.c **** 	return(ret);
 655:../../picokernel/k_raw_timer.c **** }
 1254              		.loc 1 655 0
 1255 0054 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1256              		.cfi_endproc
 1257              	.LFE25:
 1259              		.section	.text.timer_set_load,"ax",%progbits
 1260              		.align	1
 1261              		.global	timer_set_load
 1262              		.syntax unified
 1263              		.thumb
 1264              		.thumb_func
 1265              		.fpu fpv4-sp-d16
 1267              	timer_set_load:
 1268              	.LFB26:
 656:../../picokernel/k_raw_timer.c **** 
 657:../../picokernel/k_raw_timer.c **** 
 658:../../picokernel/k_raw_timer.c **** k_status_t timer_set_load(ktimer_t *t, uint32_t load_val)
 659:../../picokernel/k_raw_timer.c **** {
 1269              		.loc 1 659 0
 1270              		.cfi_startproc
 1271              		@ args = 0, pretend = 0, frame = 0
 1272              		@ frame_needed = 0, uses_anonymous_args = 0
 1273              	.LVL146:
 660:../../picokernel/k_raw_timer.c **** 	k_status_t ret = k_status_ok;
 661:../../picokernel/k_raw_timer.c **** 	archtype_t key;
 662:../../picokernel/k_raw_timer.c **** 
 663:../../picokernel/k_raw_timer.c **** 	if(t == NULL) {
 1274              		.loc 1 663 0
 1275 0000 08B3     		cbz	r0, .L130
 659:../../picokernel/k_raw_timer.c **** 	k_status_t ret = k_status_ok;
 1276              		.loc 1 659 0
 1277 0002 70B5     		push	{r4, r5, r6, lr}
ARM GAS  /tmp/ccB9flSk.s 			page 47


 1278              	.LCFI9:
 1279              		.cfi_def_cfa_offset 16
 1280              		.cfi_offset 4, -16
 1281              		.cfi_offset 5, -12
 1282              		.cfi_offset 6, -8
 1283              		.cfi_offset 14, -4
 1284 0004 0446     		mov	r4, r0
 1285 0006 0D46     		mov	r5, r1
 664:../../picokernel/k_raw_timer.c **** 		ret = k_status_invalid_param;
 665:../../picokernel/k_raw_timer.c **** 		goto cleanup;
 666:../../picokernel/k_raw_timer.c **** 	}
 667:../../picokernel/k_raw_timer.c **** 
 668:../../picokernel/k_raw_timer.c **** 	key = port_irq_lock();
 1286              		.loc 1 668 0
 1287 0008 FFF7FEFF 		bl	port_irq_lock
 1288              	.LVL147:
 1289 000c 0646     		mov	r6, r0
 1290              	.LVL148:
 669:../../picokernel/k_raw_timer.c **** 
 670:../../picokernel/k_raw_timer.c **** 	if(!t->created) {
 1291              		.loc 1 670 0
 1292 000e 637C     		ldrb	r3, [r4, #17]	@ zero_extendqisi2
 1293 0010 33B1     		cbz	r3, .L135
 1294              	.LVL149:
 1295              	.L128:
 671:../../picokernel/k_raw_timer.c **** 		t->created = true;
 672:../../picokernel/k_raw_timer.c **** 		k_work_list_init(&t->threads_pending);
 673:../../picokernel/k_raw_timer.c **** 		sys_dlist_init(&t->timer_list_link);
 674:../../picokernel/k_raw_timer.c **** 
 675:../../picokernel/k_raw_timer.c **** 	}
 676:../../picokernel/k_raw_timer.c **** 
 677:../../picokernel/k_raw_timer.c **** 	if(t->running){
 1296              		.loc 1 677 0
 1297 0012 A37C     		ldrb	r3, [r4, #18]	@ zero_extendqisi2
 1298 0014 8BB1     		cbz	r3, .L129
 1299              	.LVL150:
 678:../../picokernel/k_raw_timer.c **** 		/* cannot set load value of a running timer */
 679:../../picokernel/k_raw_timer.c **** 		ret = k_timer_running;
 680:../../picokernel/k_raw_timer.c **** 		port_irq_unlock(key);
 1300              		.loc 1 680 0
 1301 0016 3046     		mov	r0, r6
 1302 0018 FFF7FEFF 		bl	port_irq_unlock
 1303              	.LVL151:
 679:../../picokernel/k_raw_timer.c **** 		port_irq_unlock(key);
 1304              		.loc 1 679 0
 1305 001c 1020     		movs	r0, #16
 681:../../picokernel/k_raw_timer.c **** 		goto cleanup;
 1306              		.loc 1 681 0
 1307 001e 70BD     		pop	{r4, r5, r6, pc}
 1308              	.LVL152:
 1309              	.L135:
 671:../../picokernel/k_raw_timer.c **** 		k_work_list_init(&t->threads_pending);
 1310              		.loc 1 671 0
 1311 0020 0123     		movs	r3, #1
 1312 0022 6374     		strb	r3, [r4, #17]
 672:../../picokernel/k_raw_timer.c **** 		sys_dlist_init(&t->timer_list_link);
 1313              		.loc 1 672 0
ARM GAS  /tmp/ccB9flSk.s 			page 48


 1314 0024 04F11400 		add	r0, r4, #20
 1315              	.LVL153:
 1316 0028 FFF7FEFF 		bl	k_work_list_init
 1317              	.LVL154:
 673:../../picokernel/k_raw_timer.c **** 
 1318              		.loc 1 673 0
 1319 002c 04F58C73 		add	r3, r4, #280
 1320              	.LVL155:
 1321              	.LBB210:
 1322              	.LBB211:
 194:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	list->tail = (sys_dnode_t *)list;
 1323              		.loc 2 194 0
 1324 0030 C4F81831 		str	r3, [r4, #280]
 195:../../../uLipeRtosPico/picokernel/inc/k_list.h **** }
 1325              		.loc 2 195 0
 1326 0034 C4F81C31 		str	r3, [r4, #284]
 1327 0038 EBE7     		b	.L128
 1328              	.LVL156:
 1329              	.L129:
 1330              	.LBE211:
 1331              	.LBE210:
 682:../../picokernel/k_raw_timer.c **** 	}
 683:../../picokernel/k_raw_timer.c **** 
 684:../../picokernel/k_raw_timer.c **** 	t->timer_to_wait = load_val;
 1332              		.loc 1 684 0
 1333 003a 6560     		str	r5, [r4, #4]
 685:../../picokernel/k_raw_timer.c **** 
 686:../../picokernel/k_raw_timer.c **** 	port_irq_unlock(key);
 1334              		.loc 1 686 0
 1335 003c 3046     		mov	r0, r6
 1336 003e FFF7FEFF 		bl	port_irq_unlock
 1337              	.LVL157:
 660:../../picokernel/k_raw_timer.c **** 	archtype_t key;
 1338              		.loc 1 660 0
 1339 0042 0020     		movs	r0, #0
 1340 0044 70BD     		pop	{r4, r5, r6, pc}
 1341              	.LVL158:
 1342              	.L130:
 1343              	.LCFI10:
 1344              		.cfi_def_cfa_offset 0
 1345              		.cfi_restore 4
 1346              		.cfi_restore 5
 1347              		.cfi_restore 6
 1348              		.cfi_restore 14
 664:../../picokernel/k_raw_timer.c **** 		goto cleanup;
 1349              		.loc 1 664 0
 1350 0046 0220     		movs	r0, #2
 1351              	.LVL159:
 1352 0048 7047     		bx	lr
 1353              	.L127:
 1354              		.cfi_endproc
 1355              	.LFE26:
 1357              		.section	.text.ticker_timer_wait,"ax",%progbits
 1358              		.align	1
 1359              		.global	ticker_timer_wait
 1360              		.syntax unified
 1361              		.thumb
ARM GAS  /tmp/ccB9flSk.s 			page 49


 1362              		.thumb_func
 1363              		.fpu fpv4-sp-d16
 1365              	ticker_timer_wait:
 1366              	.LFB27:
 687:../../picokernel/k_raw_timer.c **** 
 688:../../picokernel/k_raw_timer.c **** cleanup:
 689:../../picokernel/k_raw_timer.c **** 	return(ret);
 690:../../picokernel/k_raw_timer.c **** }
 691:../../picokernel/k_raw_timer.c **** 
 692:../../picokernel/k_raw_timer.c **** #endif
 693:../../picokernel/k_raw_timer.c **** 
 694:../../picokernel/k_raw_timer.c **** 
 695:../../picokernel/k_raw_timer.c **** k_status_t ticker_timer_wait(uint32_t ticks)
 696:../../picokernel/k_raw_timer.c **** {
 1367              		.loc 1 696 0
 1368              		.cfi_startproc
 1369              		@ args = 0, pretend = 0, frame = 0
 1370              		@ frame_needed = 0, uses_anonymous_args = 0
 1371              	.LVL160:
 697:../../picokernel/k_raw_timer.c **** 	k_status_t ret = k_status_ok;
 698:../../picokernel/k_raw_timer.c **** 	if(!ticks) {
 1372              		.loc 1 698 0
 1373 0000 10B9     		cbnz	r0, .L148
 699:../../picokernel/k_raw_timer.c **** 		ret = k_status_invalid_param;
 1374              		.loc 1 699 0
 1375 0002 0223     		movs	r3, #2
 1376              	.LVL161:
 700:../../picokernel/k_raw_timer.c **** 		goto cleanup;
 701:../../picokernel/k_raw_timer.c **** 	}
 702:../../picokernel/k_raw_timer.c **** 
 703:../../picokernel/k_raw_timer.c **** 	tcb_t *thr = thread_get_current();
 704:../../picokernel/k_raw_timer.c **** 	ULIPE_ASSERT(thr != NULL);
 705:../../picokernel/k_raw_timer.c **** 
 706:../../picokernel/k_raw_timer.c **** 	archtype_t key = port_irq_lock();
 707:../../picokernel/k_raw_timer.c **** 
 708:../../picokernel/k_raw_timer.c **** 	ret = k_make_not_ready(thr);
 709:../../picokernel/k_raw_timer.c **** 	ULIPE_ASSERT(ret == k_status_ok);
 710:../../picokernel/k_raw_timer.c **** 	thr->wake_tick = tick_count + ticks;
 711:../../picokernel/k_raw_timer.c **** 	thr->thread_wait |= K_THR_PEND_TICKER;
 712:../../picokernel/k_raw_timer.c **** 
 713:../../picokernel/k_raw_timer.c **** 	/* put the new timer on ticker list */
 714:../../picokernel/k_raw_timer.c **** 	sys_dlist_append(&k_ticker_list, &thr->thr_link);
 715:../../picokernel/k_raw_timer.c **** 
 716:../../picokernel/k_raw_timer.c **** 	port_irq_unlock(key);
 717:../../picokernel/k_raw_timer.c **** 	/* reescheduling is needed */
 718:../../picokernel/k_raw_timer.c **** 	ret = k_sched_and_swap();
 719:../../picokernel/k_raw_timer.c **** 	ULIPE_ASSERT(ret == k_status_ok);	
 720:../../picokernel/k_raw_timer.c **** cleanup:
 721:../../picokernel/k_raw_timer.c **** 	return(ret);
 722:../../picokernel/k_raw_timer.c **** }
 1377              		.loc 1 722 0
 1378 0004 1846     		mov	r0, r3
 1379              	.LVL162:
 1380 0006 7047     		bx	lr
 1381              	.LVL163:
 1382              	.L148:
 696:../../picokernel/k_raw_timer.c **** 	k_status_t ret = k_status_ok;
ARM GAS  /tmp/ccB9flSk.s 			page 50


 1383              		.loc 1 696 0
 1384 0008 70B5     		push	{r4, r5, r6, lr}
 1385              	.LCFI11:
 1386              		.cfi_def_cfa_offset 16
 1387              		.cfi_offset 4, -16
 1388              		.cfi_offset 5, -12
 1389              		.cfi_offset 6, -8
 1390              		.cfi_offset 14, -4
 1391 000a 0546     		mov	r5, r0
 703:../../picokernel/k_raw_timer.c **** 	ULIPE_ASSERT(thr != NULL);
 1392              		.loc 1 703 0
 1393 000c FFF7FEFF 		bl	thread_get_current
 1394              	.LVL164:
 1395              	.LBB212:
 1396              	.LBB213:
 128:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 		port_set_break();
 1397              		.loc 3 128 0
 1398 0010 0446     		mov	r4, r0
 1399 0012 48B1     		cbz	r0, .L149
 1400              	.LVL165:
 1401              	.LBE213:
 1402              	.LBE212:
 706:../../picokernel/k_raw_timer.c **** 
 1403              		.loc 1 706 0
 1404 0014 FFF7FEFF 		bl	port_irq_lock
 1405              	.LVL166:
 1406 0018 0646     		mov	r6, r0
 1407              	.LVL167:
 708:../../picokernel/k_raw_timer.c **** 	ULIPE_ASSERT(ret == k_status_ok);
 1408              		.loc 1 708 0
 1409 001a 2046     		mov	r0, r4
 1410              	.LVL168:
 1411 001c FFF7FEFF 		bl	k_make_not_ready
 1412              	.LVL169:
 1413              	.LBB215:
 1414              	.LBB216:
 128:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 		port_set_break();
 1415              		.loc 3 128 0
 1416 0020 28B1     		cbz	r0, .L140
 1417              		.loc 3 129 0
 1418 0022 FFF7FEFF 		bl	port_set_break
 1419              	.LVL170:
 1420              	.L141:
 1421 0026 FEE7     		b	.L141
 1422              	.LVL171:
 1423              	.L149:
 1424              	.LBE216:
 1425              	.LBE215:
 1426              	.LBB217:
 1427              	.LBB214:
 1428 0028 FFF7FEFF 		bl	port_set_break
 1429              	.LVL172:
 1430              	.L139:
 1431 002c FEE7     		b	.L139
 1432              	.LVL173:
 1433              	.L140:
 1434              	.LBE214:
ARM GAS  /tmp/ccB9flSk.s 			page 51


 1435              	.LBE217:
 710:../../picokernel/k_raw_timer.c **** 	thr->thread_wait |= K_THR_PEND_TICKER;
 1436              		.loc 1 710 0
 1437 002e 0D4B     		ldr	r3, .L151
 1438 0030 1B68     		ldr	r3, [r3]
 1439 0032 1D44     		add	r5, r5, r3
 1440              	.LVL174:
 1441 0034 6561     		str	r5, [r4, #20]
 711:../../picokernel/k_raw_timer.c **** 
 1442              		.loc 1 711 0
 1443 0036 A389     		ldrh	r3, [r4, #12]
 1444 0038 43F48073 		orr	r3, r3, #256
 1445 003c A381     		strh	r3, [r4, #12]	@ movhi
 714:../../picokernel/k_raw_timer.c **** 
 1446              		.loc 1 714 0
 1447 003e 04F12402 		add	r2, r4, #36
 1448              	.LVL175:
 1449              	.LBB218:
 1450              	.LBB219:
 339:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	node->prev = list->tail;
 1451              		.loc 2 339 0
 1452 0042 094B     		ldr	r3, .L151+4
 1453 0044 6362     		str	r3, [r4, #36]
 340:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 
 1454              		.loc 2 340 0
 1455 0046 5968     		ldr	r1, [r3, #4]
 1456 0048 A162     		str	r1, [r4, #40]
 342:../../../uLipeRtosPico/picokernel/inc/k_list.h **** 	list->tail = node;
 1457              		.loc 2 342 0
 1458 004a 0A60     		str	r2, [r1]
 343:../../../uLipeRtosPico/picokernel/inc/k_list.h **** }
 1459              		.loc 2 343 0
 1460 004c 5A60     		str	r2, [r3, #4]
 1461              	.LVL176:
 1462              	.LBE219:
 1463              	.LBE218:
 716:../../picokernel/k_raw_timer.c **** 	/* reescheduling is needed */
 1464              		.loc 1 716 0
 1465 004e 3046     		mov	r0, r6
 1466              	.LVL177:
 1467 0050 FFF7FEFF 		bl	port_irq_unlock
 1468              	.LVL178:
 718:../../picokernel/k_raw_timer.c **** 	ULIPE_ASSERT(ret == k_status_ok);	
 1469              		.loc 1 718 0
 1470 0054 FFF7FEFF 		bl	k_sched_and_swap
 1471              	.LVL179:
 1472              	.LBB220:
 1473              	.LBB221:
 128:../../../uLipeRtosPico/ulipe_rtos_pico.h **** 		port_set_break();
 1474              		.loc 3 128 0
 1475 0058 00B9     		cbnz	r0, .L150
 1476              	.L137:
 1477              	.LBE221:
 1478              	.LBE220:
 1479              		.loc 1 722 0
 1480 005a 70BD     		pop	{r4, r5, r6, pc}
 1481              	.LVL180:
ARM GAS  /tmp/ccB9flSk.s 			page 52


 1482              	.L150:
 1483              	.LBB223:
 1484              	.LBB222:
 1485              		.loc 3 129 0
 1486 005c FFF7FEFF 		bl	port_set_break
 1487              	.LVL181:
 1488              	.L142:
 1489 0060 FEE7     		b	.L142
 1490              	.L152:
 1491 0062 00BF     		.align	2
 1492              	.L151:
 1493 0064 00000000 		.word	.LANCHOR0
 1494 0068 00000000 		.word	.LANCHOR1
 1495              	.LBE222:
 1496              	.LBE223:
 1497              		.cfi_endproc
 1498              	.LFE27:
 1500              		.global	timer_tcb
 1501              		.global	next_task_wake
 1502              		.global	tick_count
 1503              		.comm	actual_timer,4,4
 1504              		.section	.bss.k_ticker_list,"aw",%nobits
 1505              		.align	2
 1506              		.set	.LANCHOR1,. + 0
 1509              	k_ticker_list:
 1510 0000 00000000 		.space	8
 1510      00000000 
 1511              		.section	.bss.k_timed_list,"aw",%nobits
 1512              		.align	2
 1513              		.set	.LANCHOR3,. + 0
 1516              	k_timed_list:
 1517 0000 00000000 		.space	8
 1517      00000000 
 1518              		.section	.bss.next_task_wake,"aw",%nobits
 1519              		.align	2
 1520              		.set	.LANCHOR2,. + 0
 1523              	next_task_wake:
 1524 0000 00000000 		.space	4
 1525              		.section	.bss.stack_timer_tcb,"aw",%nobits
 1526              		.align	2
 1529              	stack_timer_tcb:
 1530 0000 00000000 		.space	768
 1530      00000000 
 1530      00000000 
 1530      00000000 
 1530      00000000 
 1531              		.section	.bss.tick_count,"aw",%nobits
 1532              		.align	2
 1533              		.set	.LANCHOR0,. + 0
 1536              	tick_count:
 1537 0000 00000000 		.space	4
 1538              		.section	.data.timer_tcb,"aw",%progbits
 1539              		.align	2
 1540              		.set	.LANCHOR4,. + 0
 1543              	timer_tcb:
 1544 0000 00000000 		.space	4
 1545 0004 00000000 		.word	stack_timer_tcb
ARM GAS  /tmp/ccB9flSk.s 			page 53


 1546 0008 00000000 		.space	4
 1547 000c 0000     		.short	0
 1548 000e 18       		.byte	24
 1549 000f 00       		.byte	0
 1550 0010 C0000000 		.word	192
 1551 0014 00000000 		.word	0
 1552 0018 00000000 		.space	20
 1552      00000000 
 1552      00000000 
 1552      00000000 
 1552      00000000 
 1553              		.text
 1554              	.Letext0:
 1555              		.file 4 "/home/venturus/gcc-arm-none-eabi-6-2017-q2-update/arm-none-eabi/include/machine/_default_
 1556              		.file 5 "/home/venturus/gcc-arm-none-eabi-6-2017-q2-update/arm-none-eabi/include/sys/_stdint.h"
 1557              		.file 6 "/home/venturus/gcc-arm-none-eabi-6-2017-q2-update/arm-none-eabi/include/sys/lock.h"
 1558              		.file 7 "/home/venturus/gcc-arm-none-eabi-6-2017-q2-update/arm-none-eabi/include/sys/_types.h"
 1559              		.file 8 "/home/venturus/gcc-arm-none-eabi-6-2017-q2-update/lib/gcc/arm-none-eabi/6.3.1/include/std
 1560              		.file 9 "/home/venturus/gcc-arm-none-eabi-6-2017-q2-update/arm-none-eabi/include/sys/reent.h"
 1561              		.file 10 "../../../uLipeRtosPico/include/picokernel/k_thread.h"
 1562              		.file 11 "../../../uLipeRtosPico/include/picokernel/k_kernel.h"
 1563              		.file 12 "../../../uLipeRtosPico/include/picokernel/k_raw_timer.h"
 1564              		.file 13 "../../../uLipeRtosPico/include/picokernel/k_port.h"
ARM GAS  /tmp/ccB9flSk.s 			page 54


DEFINED SYMBOLS
                            *ABS*:0000000000000000 k_raw_timer.c
     /tmp/ccB9flSk.s:18     .text.timer_step_tick:0000000000000000 $t
     /tmp/ccB9flSk.s:24     .text.timer_step_tick:0000000000000000 timer_step_tick
     /tmp/ccB9flSk.s:312    .text.timer_step_tick:00000000000000e4 $d
                            *COM*:0000000000000004 actual_timer
     /tmp/ccB9flSk.s:321    .text.timer_dispatcher:0000000000000000 $t
     /tmp/ccB9flSk.s:328    .text.timer_dispatcher:0000000000000000 timer_dispatcher
     /tmp/ccB9flSk.s:823    .text.timer_dispatcher:00000000000001e4 $d
     /tmp/ccB9flSk.s:835    .text.timer_start:0000000000000000 $t
     /tmp/ccB9flSk.s:842    .text.timer_start:0000000000000000 timer_start
     /tmp/ccB9flSk.s:950    .text.timer_start:0000000000000060 $d
     /tmp/ccB9flSk.s:956    .text.timer_stop:0000000000000000 $t
     /tmp/ccB9flSk.s:963    .text.timer_stop:0000000000000000 timer_stop
     /tmp/ccB9flSk.s:1107   .text.timer_stop:000000000000007c $d
     /tmp/ccB9flSk.s:1113   .text.timer_poll:0000000000000000 $t
     /tmp/ccB9flSk.s:1120   .text.timer_poll:0000000000000000 timer_poll
     /tmp/ccB9flSk.s:1136   .text.timer_set_callback:0000000000000000 $t
     /tmp/ccB9flSk.s:1143   .text.timer_set_callback:0000000000000000 timer_set_callback
     /tmp/ccB9flSk.s:1260   .text.timer_set_load:0000000000000000 $t
     /tmp/ccB9flSk.s:1267   .text.timer_set_load:0000000000000000 timer_set_load
     /tmp/ccB9flSk.s:1358   .text.ticker_timer_wait:0000000000000000 $t
     /tmp/ccB9flSk.s:1365   .text.ticker_timer_wait:0000000000000000 ticker_timer_wait
     /tmp/ccB9flSk.s:1493   .text.ticker_timer_wait:0000000000000064 $d
     /tmp/ccB9flSk.s:1543   .data.timer_tcb:0000000000000000 timer_tcb
     /tmp/ccB9flSk.s:1523   .bss.next_task_wake:0000000000000000 next_task_wake
     /tmp/ccB9flSk.s:1536   .bss.tick_count:0000000000000000 tick_count
     /tmp/ccB9flSk.s:1505   .bss.k_ticker_list:0000000000000000 $d
     /tmp/ccB9flSk.s:1509   .bss.k_ticker_list:0000000000000000 k_ticker_list
     /tmp/ccB9flSk.s:1512   .bss.k_timed_list:0000000000000000 $d
     /tmp/ccB9flSk.s:1516   .bss.k_timed_list:0000000000000000 k_timed_list
     /tmp/ccB9flSk.s:1519   .bss.next_task_wake:0000000000000000 $d
     /tmp/ccB9flSk.s:1526   .bss.stack_timer_tcb:0000000000000000 $d
     /tmp/ccB9flSk.s:1529   .bss.stack_timer_tcb:0000000000000000 stack_timer_tcb
     /tmp/ccB9flSk.s:1532   .bss.tick_count:0000000000000000 $d
     /tmp/ccB9flSk.s:1539   .data.timer_tcb:0000000000000000 $d
                     .debug_frame:0000000000000010 $d

UNDEFINED SYMBOLS
port_irq_lock
port_irq_unlock
thread_wait_signals
port_set_break
k_make_ready
thread_clr_signals
k_work_list_init
thread_get_current
k_make_not_ready
k_sched_and_swap
